<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Thibaud‚Äôs blog]]></title>
  <link href="https://thib.me/atom.xml" rel="self"/>
  <link href="https://thib.me/"/>
  <updated>2021-02-18T09:16:20+00:00</updated>
  <id>https://thib.me/</id>
  <author>
    <name><![CDATA[Thibaud Colas]]></name>
    
  </author>

  
  <entry>
    <title type="html"><![CDATA[ATAG 2.0 getting started resources]]></title>
    <link href="https://thib.me/atag-getting-started-resources"/>
    <updated>2021-01-06T21:42:03+00:00</updated>
    <id>https://thib.me/atag-getting-started-resources</id>
    <content type="html"><![CDATA[<p>There aren‚Äôt many resources out there about <a href="https://www.w3.org/TR/ATAG20/">ATAG</a>. Here are the ones I have found and occasionally come back to.</p>

<!-- more -->

<h2 id="why-do-we-need-this">Why do we need this?</h2>

<p>I often hear people question whether ATAG really is applicable to <code class="language-plaintext highlighter-rouge">&lt;insert name of tool&gt;</code>. In my experience the answer has so far always been ‚Äúyes‚Äù. Here‚Äôs a quick step by step:</p>

<ol>
  <li>Does the tool allow creating content for the web? (any editing of content visible on a website)</li>
  <li>That content needs to be accessible.</li>
  <li>So the tool needs to make it possible to create accessible content.</li>
</ol>

<p>It‚Äôs as simple as that, regardless of whether the ‚Äútool‚Äù is a CMS, a text editor, an admin panel, or just a form with a few plain-text fields.</p>

<p>Mitchell Evan also summarizes the need for ATAG in his excellent talk <a href="https://wpaccessibilityday.org/talks/if-its-true-it-aint-bragging-choosing-a-cms-for-accessibility/">If it‚Äôs true it ain‚Äôt bragging! Choosing a CMS for accessibility</a>:</p>

<blockquote>
  <p>Authoring Tool Accessibility Guidelines (ATAG): Who needs them?</p>

  <ul>
    <li>Nobody ‚Äî because no law or regulation directly requires ATAG.</li>
    <li><strong>Everybody ‚Äî because ATAG reduces your risk of an inaccessible website.</strong></li>
  </ul>
</blockquote>

<p>So ‚Äì yes, there is no compliance requirement. But it‚Äôs no less relevant of a standard, and it is the de-facto goalpost for all authoring tools who care about accessibility out there. Oh and it will likely <a href="https://www.w3.org/WAI/standards-guidelines/wcag/wcag3-intro/">be part of WCAG 3.0</a>, which will likely be a compliance requirement in the future.</p>

<h2 id="official-resources">Official resources</h2>

<p>There are very few unfortunately.</p>

<ul>
  <li><a href="https://www.w3.org/WAI/atag/report-tool/">ATAG report tool</a> is the official ATAG report generator.</li>
  <li><a href="https://github.com/w3c/wai-authoring-tools">WAI Authoring Tools</a> is a very promising way to explore how different tools comply with ATAG, unfortunately the project seems to have stalled halfway through.
    <ul>
      <li>In particular, this project has a list of <a href="https://wai-authoring-tools.netlify.app/authoring-tools/selecting#features">accessibility features in authoring tools</a> which makes for a very good introduction to ATAG.</li>
    </ul>
  </li>
  <li><a href="https://www.w3.org/WAI/about/projects/wai-guide/">WAI Guide</a> is a W3C project co-funded by the EU‚Äôs Horizon 2020 program, that might produce more resources in the future.</li>
</ul>

<h2 id="research">Research</h2>

<p>There are a few research teams working on authoring tools‚Äô accessibility. Here is the work that stood out the most for me.</p>

<ul>
  <li><a href="https://accessibilitycluster.com/">Accessibility Cluster</a> is another EU research project currently under way to look at accessibility in CMSes. There are interesting resources available from the project pilot, unfortunately doesn‚Äôt go very far beyond what ATAG already states:
    <ul>
      <li><a href="https://www.funka.com/en/projekt/we4authors/we4authors-main-activities-and-results/workshops-on-accessible-content-management-systems/workshops/">Workshops results</a></li>
      <li><a href="https://www.funka.com/en/projekt/we4authors/we4authors-main-activities-and-results/accessibility-guidelines-for-the-cms-community-suppliers-and-public-governments/">Guidelines for stakeholders</a></li>
      <li>Report for CMS tools in particular (but could apply to any kind of web publishing): <a href="https://www.funka.com/contentassets/c43f6521e7354c9a8f82e62402f10aad/guidelines_for_authoring_tools_producers.pdf">Guidelines for authoring tools producers</a></li>
    </ul>
  </li>
  <li><a href="https://www.researchgate.net/profile/Tania_Acosta4/publication/322250312_Method_for_Accessibility_Assessment_of_Online_Content_Editors/links/5d6600faa6fdccc32cd67dbd/Method-for-Accessibility-Assessment-of-Online-Content-Editors.pdf">Method for accessibility assessment of online content editors (preprint)</a> covers which WCAG guidelines should likely be considered when evaluating ATAG for a CMS.</li>
</ul>

<h2 id="drupal-and-wordpress">Drupal and WordPress</h2>

<p>In the CMS world, Drupal and WordPress have the most established resources when it comes to accessibility, and ATAG in particular.</p>

<p>Drupal:</p>

<ul>
  <li><a href="https://www.drupal.org/docs/accessibility">Accessibility in Drupal</a></li>
  <li><a href="https://www.drupal.org/node/2034909">Drupal - Track progress in ATAG 2.0 conformance</a>
    <ul>
      <li>Out of date but still interesting: <a href="https://groups.drupal.org/node/164389">Drupal compliance overview of ATAG 2.0</a></li>
    </ul>
  </li>
  <li><a href="https://medium.com/@mgifford/web-accessibility-atag-drupal-8-4132bf3724ea">Web Accessibility, ATAG &amp; Drupal 8</a></li>
  <li>Talk: <a href="https://drupal.tv/index.php/external-video/2017-08-26/why-we-should-get-excited-about-atag-20">Why We Should Get Excited About ATAG 2.0</a></li>
</ul>

<p>WordPress:</p>

<ul>
  <li><a href="https://wpaccessibilityday.org/">WP Accessibility Day</a>
    <ul>
      <li><a href="https://wpaccessibilityday.org/talks/your-cms-is-an-accessibility-assistant/">Your CMS is an Accessibility Assistant</a>, <a href="https://youtu.be/V0yJ_qJBvoc?t=7775">video</a></li>
    </ul>
  </li>
  <li><a href="https://www.wpcampus.org/blog/2019/05/gutenberg-audit-results/">WPCampus releases results of the Gutenberg accessibility audit</a></li>
</ul>

<h2 id="other-platforms">Other platforms</h2>

<p>There are a few other authoring tools that have some accessibility / ATAG-relevant resources:</p>

<ul>
  <li><a href="https://www.wix.com/accessibility">Wix accessibility tools &amp; guides</a></li>
  <li><a href="https://help.surveymonkey.com/articles/en_US/kb/Accessibility-at-SurveyMonkey">Accessibility at SurveyMonkey</a></li>
  <li>One I put together for Wagtail: <a href="https://docs.wagtail.io/en/latest/advanced_topics/accessibility_considerations.html">Wagtail accessibility considerations</a></li>
</ul>

<h2 id="atag-examples">ATAG examples</h2>

<p>To round off this list, here are practical examples of checkers that can help meet ATAG‚Äôs Principle B.3: Authors are supported in improving the accessibility of existing content.</p>

<ul>
  <li><a href="https://www.tiny.cloud/docs/plugins/premium/a11ychecker/">TinyMCE‚Äôs accessibility checker</a></li>
  <li><a href="https://khan.github.io/tota11y/">Tota11y</a>, particularly relevant for content management systems.
    <ul>
      <li><a href="https://github.com/neon-jungle/wagtail-accessibility">And its Wagtail implementation, wagtail-accessibility</a></li>
    </ul>
  </li>
  <li><a href="https://support.microsoft.com/en-us/office/make-your-content-accessible-to-everyone-with-the-accessibility-checker-38059c2d-45ef-4830-9797-618f0e96f3ab">Microsoft Office 365 accessibility checker</a></li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pattern Lab goes Django]]></title>
    <link href="https://thib.me/pattern-lab-goes-django"/>
    <updated>2020-12-11T12:52:22+00:00</updated>
    <id>https://thib.me/pattern-lab-goes-django</id>
    <content type="html"><![CDATA[<p>If you‚Äôre into UI component reuse, you may have heard of¬†<a href="https://atomicdesign.bradfrost.com/">Atomic Design</a>¬†and¬†<a href="https://patternlab.io/">Pattern Lab</a>. We‚Äôre big fans at Torchbox, but Pattern Lab is PHP or Node-based, while we decided long ago to¬†<a href="https://torchbox.com/blog/alternatives-to-drupal/">leave the PHP / Drupal world behind</a>, and concentrate on Django. We took Pattern Lab with us, and built¬†<a href="https://torchbox.github.io/django-pattern-library/">django-pattern-library</a>¬†‚Äì a.k.a. Pattern Lab goes Django.</p>

<!-- more -->

<h2 id="pattern-libraries-at-torchbox">Pattern libraries at Torchbox</h2>

<p>At Torchbox, pattern libraries are a way to separate concerns between front-end and back-end development. We‚Äôve been using our Django pattern library package for a couple of years to:</p>

<ul>
  <li>Clarify responsibilities and separate concerns, both in code, and as members of a development team between front-end and back-end development.</li>
  <li>As needed, enable for front-end developers to work on pages and block templates before any back-end development happens.</li>
  <li>Encourage code reuse and components composition ‚Äì defining independent UI components, reusable without markup copy-paste, and reusable on other projects like any Django app.</li>
</ul>

<p>Does this sound useful to you? Go and have a look at our introductory presentation from Wagtail Space US 2020,¬†<a href="https://www.youtube.com/watch?v=isrOufI7TKc">Reusable UI components ‚Äì A journey from React to Wagtail</a>:</p>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/isrOufI7TKc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>Slides: <a href="https://docs.google.com/presentation/d/1pZAbunn0Ci8B9NR0mS5taOPe7BMdAiDrKNIcd9xBWO4/edit">Wagtail Space US 2020 - Reusable UI components ‚Äì A journey from React to Wagtail</a></p>

<h2 id="our-first-big-release">Our first big release</h2>

<p>Pattern Lab has been around for a while, and so has our own¬†<a href="https://torchbox.github.io/django-pattern-library/">django-pattern-library</a>, but we only open-sourced it a few months ago. Sadly it wasn‚Äôt as well documented or flexible as we would have liked it to be. This is starting to change with our most recent release. Here are the headline features:</p>

<ul>
  <li><a href="https://torchbox.github.io/django-pattern-library/getting-started/#compatibility">Support for Python 3.9, Django 3.0, 3.1, and tentatively 3.2</a>. We also started running the project‚Äôs tests against Django‚Äôs development branch for good measure.</li>
  <li>A new¬†<a href="https://torchbox.github.io/django-pattern-library/guides/automated-tests/#with-render_patterns"><em>render_patterns</em>¬†management command</a>, so you can test whether all of your project‚Äôs patterns render successfully at once. Think of it as smoke tests for pattern library components.</li>
  <li><a href="https://torchbox.github.io/django-pattern-library/reference/api/#override_tag">Optional default values for tag overrides</a>, so you no longer have to repeat specific overrides in all of your component mocks.</li>
  <li><a href="https://torchbox.github.io/django-pattern-library/reference/api/#sections">Support for arbitrary template structures</a>¬†‚Äì¬†whether that‚Äôs across multiple apps or only one, however you want your templates to be structured.</li>
</ul>

<p>View the full¬†<a href="https://github.com/torchbox/django-pattern-library/blob/master/CHANGELOG.md">CHANGELOG</a>. Along those shiny features, we also released two massive improvements to the project: a¬†<a href="https://torchbox.github.io/django-pattern-library/">new documentation website</a>, with lots more content¬†‚Äì guides, recipes, and reference info. And also a¬†<a href="https://torchbox.github.io/django-pattern-library/demo/pattern-library/">new demo site</a>, so you can see for yourself how the project works (although note the public demo is¬†<a href="https://torchbox.github.io/django-pattern-library/guides/static-site-export/">exported as a static site</a>).</p>

<h3 id="template-structures">Template structures</h3>

<p>Starting in v0.3.0, you may structure your project‚Äôs templates in however many folders you want. This feels like such an obvious need in hindsight, but the pattern library having only been an internal Torchbox project for a while, it didn‚Äôt really need to accommodate that many different structures!</p>

<p>This is now possible thanks to the new¬†<a href="https://torchbox.github.io/django-pattern-library/reference/api/#sections">SECTIONS</a>¬†setting, with the previous predefined structure kept as the default for backwards compatibility. It also comes with a lot of black magic to decide which templates are partials and should be rendered in a base template, and which can be rendered as-is.</p>

<h3 id="render_patterns">render_patterns</h3>

<p>This new management command might or might not be relevant to you but it‚Äôs worth highlighting use cases this is intended to support:</p>

<ul>
  <li><a href="https://torchbox.github.io/django-pattern-library/guides/static-site-export/">Static exports of the pattern library</a>, for those cases where you want a simple way to share patterns publicly or host them alongside documentation, rather than alongside your site.</li>
  <li><a href="https://torchbox.github.io/django-pattern-library/guides/automated-tests/">Automated tests of UI components</a>, particularly in continuous integration, where it might be problematic for you to get a Django server up and running depending on the project‚Äôs dependencies.</li>
</ul>

<p>Combined with tools like¬†<a href="https://pa11y.org/">Pa11y and pa11y-ci</a>, this makes it much simpler to run site-wide automated accessibility tests for all of your project‚Äôs templates, making the most of the pattern library‚Äôs tightly controlled mock data:</p>

<p><img src="/images/blog/pattern-lab-goes-django/gitlab-ci-pa11y-patterns.png" alt="Screenshot of pa11y-ci output in GitLab CI showing reported issues on pattern library templates" /></p>

<p>There are still rough edges (for example the command will abort the whole test suite if only a single template fails to render!), but we hope you‚Äôll find uses for this nonetheless.</p>

<h2 id="whats-next">What‚Äôs next</h2>

<p>Hopefully more of the above ‚Äì new features, more stability, better documentation. We‚Äôre particulary keen on¬†<a href="https://github.com/torchbox/django-pattern-library/issues/106">finding ways to mock templates with factories rather than plain data structures</a>, and¬†<a href="https://github.com/torchbox/django-pattern-library/issues/103">combining our Django rendering features with Storybook‚Äôs developer experience</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Detecting Wagtail in the wild]]></title>
    <link href="https://thib.me/detecting-wagtail-in-the-wild"/>
    <updated>2020-11-18T15:15:22+00:00</updated>
    <id>https://thib.me/detecting-wagtail-in-the-wild</id>
    <content type="html"><![CDATA[<p>How can you tell if a site is made with Wagtail or not? There are more ways than people might think at first sight, and after a few years of toying with the idea I finally put together a way to detect Wagtail sites, that strikes a good balance between reliability and convenience. Let‚Äôs go birdwatching.</p>

<!-- more -->

<h2 id="ways-to-detect-wagtail">Ways to detect Wagtail</h2>

<p>I could think of a few <a href="https://github.com/springload/madewithwagtail/issues/62">when I first started thinking of this problem</a>:</p>

<ul>
  <li>Determine if the site is <a href="https://stackoverflow.com/questions/721934/how-can-you-tell-if-a-site-has-been-made-with-django">built with Django</a>. That‚Äôs a start</li>
  <li>Check if the site uses a <a href="https://wagtail.io/wagtail-badges/">Wagtail badge</a>. Cute, but not used much in practice.</li>
  <li>Load <code class="language-plaintext highlighter-rouge">/admin/login</code> and check for ‚Äúwagtail‚Äù in the response ‚Äì¬†that would surely be an almost certain match.</li>
</ul>

<p>The problem with a lot of those approaches is their relance on crawling the site, which is quite invasive, not very reliable, and can be time-consuming across a lot of sites. It‚Äôs also unclear how common those cues would be across the breadth of Wagtail sites out there.</p>

<p>The ideal approach would be HTTP response headers ‚Äì¬†which could be obtained from any page with a lightweight HEAD request. Wagtail unfortunately doesn‚Äôt have any custom header, so the next best thing is to inspect the pages‚Äô markup:</p>

<ul>
  <li>Wagtail‚Äôs (legacy) rich text uses the <code class="language-plaintext highlighter-rouge">rich-text</code> class to wrap the HTML of rich text fields</li>
  <li>Rich text images use hard-coded classes like <a href="https://github.com/wagtail/wagtail/blob/bb2e460c0b92fba802fc3f369730004d6b648e64/wagtail/images/formats.py#L91-L94"><code class="language-plaintext highlighter-rouge">richtext-image full-width</code></a></li>
  <li>Wagtail‚Äôs documents are served from a <a href="https://github.com/wagtail/wagtail/blob/bb2e460c0b92fba802fc3f369730004d6b648e64/wagtail/documents/urls.py#L6"><code class="language-plaintext highlighter-rouge">/documents/</code></a> sub-path.</li>
  <li>And last but not least, <a href="https://docs.wagtail.io/en/stable/topics/images.html?highlight=renditions#generating-image-renditions-in-python">image renditions</a>.</li>
</ul>

<p>Image renditions are very common on Wagtail sites. The detection would only work for pages that have user-uploaded images, but lucky for us a site‚Äôs homepage tends to be the type of high-value page where there are CMS-managed images. Here are a few examples of URLs from renditions:</p>

<pre><code class="language-txt">https://www.jazzfestival.nz/media/images/video-fallback-image_1.width-1920.png

/media/images/bevi_3_mob.original.format-png.png

/media/original_images/Social_Distancing_Dashboard_-_image_1_TU_DelftAMS_Institute.png

https://buckup-ff-stories.s3.amazonaws.com/original_images/Lockup_Logo_-_JPEG-1.png

/media/images/UE4LowPolyVehicleTh.2e16d0ba.fill-960x540-c0.jpg
</code></pre>

<p>The distinctive features are the folders ‚Äì always either <code class="language-plaintext highlighter-rouge">images</code> or <code class="language-plaintext highlighter-rouge">original_images</code>, and frequently either placed directly at the root of a site, or from a <code class="language-plaintext highlighter-rouge">/media</code> subfolder at the root, or a single level up. And then the fact that all of the site‚Äôs images are placed in those two folders without any additional sub-folders, with file name suffixes following a set format for all files under <code class="language-plaintext highlighter-rouge">images/</code> like <code class="language-plaintext highlighter-rouge">.width-1920</code> or <code class="language-plaintext highlighter-rouge">.fill-960x450-c0</code> above. I came up with the particular regex used here after trying out different variations on 800‚Äô000 homepages from the <a href="https://majestic.com/reports/majestic-million">Majestic Million</a> list of domains.</p>

<h2 id="the-regex">The regex</h2>

<p>Here is a simplified diagram of the logic (created with <a href="https://regexper.com/#%5C%2F%28original_images%5C%2F%5B%5Cw-%5D%2B%5C.%7Cimages%5C%2F%5B%5Cw-.%5D%2B%5C.%28%28fill%7Cmax%7Cmin%7Cwidth%7Cheight%7Cscale%29-%5Cd%7Coriginal%29%29">regexper</a>):</p>

<p><img src="/images/blog/detecting-wagtail-in-the-wild/regexper-diagram.svg" alt="regexper train diagram of Wagtail regular expressions" /></p>

<h2 id="real-world-usage">Real-world usage</h2>

<p>The regex could be more complex and precise but this wouldn‚Äôt actually change much to its real-world usefulness, so I gradually simplified it to the above. With this in place, we can then create different ways to run this detection on arbitrary websites:</p>

<ul>
  <li>An online website, <a href="https://detect-wagtail.netlify.app/">detect-wagtail.netlify.app</a>.</li>
  <li>A bookmarket, also available from <a href="https://detect-wagtail.netlify.app/">detect-wagtail.netlify.app</a>.</li>
  <li>A browser extension thanks to <a href="https://github.com/AliasIO/wappalyzer">Wappalyzer</a>.</li>
  <li>A Node CLI, also thanks to <a href="https://github.com/AliasIO/wappalyzer">Wappalyzer</a>.</li>
  <li>As an npm package for more custom needs, <a href="https://www.npmjs.com/package/detect-wagtail">detect-wagtail</a></li>
</ul>

<p>With Wappalyzer in particular, they also offer additional services based on anonymous data reporting from their detection tools. Here is their page that aggregates Wagtail usage data: <a href="https://www.wappalyzer.com/technologies/cms/wagtail/">Websites using Wagtail</a>.</p>

<p>If you‚Äôre unsure which of these to use ‚Äì the Wappalyzer checks are the strictest, so best used if you don‚Äôt want to manually confirm the results by inspecting the pages‚Äô HTML.</p>

<h2 id="real-world-data">Real-world data</h2>

<p>With this regex in place, I tried it out on a few lists of websites. See <a href="https://github.com/thibaudcolas/detect-wagtail/tree/main/docs/analysis">detect-wagtail/docs/analysis</a> for the full details.</p>

<h3 id="eu-public-sector-websites">EU public sector websites</h3>

<p>Dataset from <a href="https://www.funka.com/en/projekt/we4authors/">We4authors</a>. Based on this analysis, I could find 3 national EU public sector websites built with Wagtail:</p>

<pre><code class="language-txt">www.danepubliczne.gov.pl
www.nhs.uk
www.nesta.org.uk
</code></pre>

<p>There are many more public sector websites built with Wagtail at the national and regional / local level, but this type of analysis already shows the value in having the ability to detect Wagtail ‚Äì¬†the CMS could be part of <a href="https://www.funka.com/en/projekt/we4authors/we4authors-main-activities-and-results/market-analysis-and-benchmarking-process-of-existing-cms/">market analysis</a> for research projects like We4authors, from which we can learn a lot.</p>

<h3 id="us-federal-websites">US federal websites</h3>

<p>Analysis of the US federal websites from the <a href="https://github.com/GSA/digitalgov.gov/blob/main/content/resources/content-management-systems-used-by-government-agencies.md">digital.gov list</a>.</p>

<pre><code class="language-txt">fec.gov
www.peacecorps.gov
www.consumerfinance.gov
</code></pre>

<h3 id="made-with-wagtail">Made with Wagtail</h3>

<p><a href="https://madewithwagtail.org/">Made with Wagtail</a> is a showcase of a lot of Wagtail sites and apps. About two thirds of sites listed are detected with the following regular expressions.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ag <span class="s1">'\/(original_images\/[\w-]+\.|images\/[\w-.]+\.((fill|max|min|width|height|scale)-\d|original))'</span> mww <span class="nt">--stats-only</span>
<span class="c"># 382 files contained matches</span>
ag <span class="s1">'\/media\/(original_images\/[\w-]+\.|images\/[\w-.]+\.((fill|max|min)-\d+x\d+(-c\d+)?|(width|height|scale)-\d+|original)\.)'</span> mww <span class="nt">--stats-only</span>
<span class="c"># 292 files contained matches</span>
</code></pre></div></div>

<p>The remaining third are largely made up of sites that‚Ä¶ actually aren‚Äôt made with Wagtail, either because Wagtail is only used for a specific section of a site (and not the homepage), or because the site got rebuilt with another technology since being listed there.</p>

<h3 id="majestic-million">Majestic Million</h3>

<p>The <a href="https://majestic.com/reports/majestic-million">Majestic Million</a> is a dataset of 1M domain names ordered by popularity. We can also use the above methodology to assess how many websites are made with Wagtail on this list (about 0.05%).</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ag <span class="s1">'\/media\/(original_images\/[\w-]+\.|images\/[\w-.]+\.((fill|max|min)-\d+x\d+(-c\d+)?|(width|height|scale)-\d+|original)\.)'</span> million <span class="nt">--stats-only</span>
<span class="c"># 296 files contained matches</span>
ag <span class="s1">'\/(original_images\/[\w-]+\.|images\/[\w-.]+\.((fill|max|min|width|height|scale)-\d|original))'</span> ../detect-wagtail-data/million <span class="nt">--stats-only</span>
<span class="c"># 528 files contained matches</span>
</code></pre></div></div>

<p>Those numbers neatly match those of <a href="https://whatcms.org/c/Wagtail">WhatCMS</a>.</p>

<h2 id="security-implications">Security implications</h2>

<p>Telling whether a given site is built with Wagtail or not really doesn‚Äôt take that much effort. The image renditions methodology also shows it‚Äôs very easy to do at scale. There is nothing here that can prevent bad actors from scanning the web for vulnerable Wagtail sites, as is commonplace for other platforms. For all intents and purposes, you should assume this is happening already.</p>

<p>What should we do then? For a start, don‚Äôt rely on <a href="https://en.wikipedia.org/wiki/Security_through_obscurity">security through obscurity</a>. Take the time to establish a threat model for your site, and protect it accordingly by restricting access to anything exploitable, and implementing brute force protections where relevant. Take a multi-layered approach to security ‚Äì¬†with defenses at the network level (e.g. a WAF), application level (e.g. rate limiting, defensive programming, handling of untrusted input, etc.), and also monitoring (logs analysis).</p>

<p>An old but still relevant example of this in the Wagtail world is <a href="https://github.com/springload/wagtailenforcer">WagtailEnforcer</a>.</p>

<p>And of course, keep your site up-to-date with security fixes for all its dependencies. While the approach described here doesn‚Äôt make it possible to determine which version of Wagtail is used ‚Äì there are other very viable approaches that make this equally as easy (see <a href="https://github.com/caioariede/detect-django-version">detect-django-version</a> for inspiration).</p>

<h2 id="applications">Applications</h2>

<p>There are a lot more applications to being able to detect Wagtail websites than just knowing how many there are out there. <a href="WhatCMS.org">WhatCMS.org</a> has had some amount of Wagtail data for years and is a good example of the potential for market analysis. For me, I‚Äôm more interested in seeing how Wagtail is used in the wild. Here are interesting questions this can help answer:</p>

<ul>
  <li>Wagtail headless usage ‚Äì which static site generators are the most common with Wagtail, that would be worth documenting the usage of better. In my analysis, I found a lot of Next and Gatsby websites in particular.</li>
  <li>Security best practices ‚Äì how many websites have the Wagtail admin accessible from any IP vs being restricted.</li>
  <li>Accessibility ‚Äì how accessible Wagtail sites are.</li>
</ul>

<p>This last point is the one I‚Äôm the most interested in ‚Äì in particular, comparing Wagtail‚Äôs results to those of other technologies in the <a href="https://webaim.org/projects/million/">WebAIM Million</a>. We‚Äôll see how that goes!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Accessibility wins for Django projects]]></title>
    <link href="https://thib.me/accessibility-wins-for-django-projects"/>
    <updated>2020-09-15T22:15:22+00:00</updated>
    <id>https://thib.me/accessibility-wins-for-django-projects</id>
    <content type="html"><![CDATA[<p>Talk at DjangoCon EU 2020</p>

<!-- more -->

<ul>
  <li><a href="https://docs.google.com/presentation/d/1JWroGeYl7JlP2OHbG4a4h0SxSlMsWJvRTvDm0kFkqhQ/edit">Google Slides: DjangoCon EU 2020 - Accessibility wins for Django projects</a></li>
  <li><a href="https://drive.google.com/file/d/12tedghT8bRGhnZgWt7tXWv_qtvJ1YKCA/view?usp=sharing">PDF: DjangoCon EU 2020 - Accessibility wins for Django projects</a></li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Testing accessibility in Continuous Integration with Pa11y and beyond]]></title>
    <link href="https://thib.me/testing-accessibility-in-ci-with-pa11y-and-beyond"/>
    <updated>2020-08-13T21:21:08+00:00</updated>
    <id>https://thib.me/testing-accessibility-in-ci-with-pa11y-and-beyond</id>
    <content type="html"><![CDATA[<p>Here are tools I recommend to test for accessibility issues in continuous integration, where automation is the only option, and reliability is paramount.</p>

<!-- more -->

<h2 id="the-requirements-of-ci">The requirements of CI</h2>

<p>It‚Äôs worth pointing out early ‚Äì no accessibility testing tool can <a href="https://alphagov.github.io/accessibility-tool-audit/">find all issues</a> . With this in mind, in CI, we need to focus on tools that find as much as possible‚Ä¶ but don‚Äôt create false positives, which are very damaging when they fail your build. It‚Äôs more important for a tool to have a <a href="https://en.wikipedia.org/wiki/Precision_and_recall">high precision, than a high recall</a>).</p>

<h2 id="static-analysis">Static analysis</h2>

<p>This is always a valuable first line of defense.</p>

<ul>
  <li>
    <p>Basic checks for stylesheets: <a href="https://github.com/YozhikM/stylelint-a11y">stylelint-a11y</a></p>
  </li>
  <li>Relatively advanced checks for React code: <a href="https://github.com/yannickcr/eslint-plugin-react">eslint-plugin-react</a>, <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y">eslint-plugin-jsx-a11y</a></li>
  <li>And a Vue equivalent: <a href="https://github.com/maranran/eslint-plugin-vue-a11y">eslint-plugin-vue-a11y</a></li>
  <li>For HTML templates, you can try my own experimental HTML templates linter, <a href="https://github.com/thibaudcolas/curlylint">Curlylint</a>.</li>
</ul>

<h2 id="accessibility-tests-in-unit-and-integration-tests">Accessibility tests in unit and integration tests</h2>

<p>Here are the options, from simplest to most complex:</p>

<ul>
  <li><a href="https://github.com/nickcolley/jest-axe">jest-axe</a> in jsdom for React projects. It‚Äôs very lightweight to set up, and gives surprisingly good results.</li>
  <li><a href="https://github.com/nickcolley/jest-axe">jest-axe</a> in Puppeteer. It‚Äôs not lightweight to set up, far from it, but does a bit more.</li>
  <li><a href="https://pa11y.org/">Pa11y</a>, or <a href="https://github.com/pa11y/pa11y-ci">pa11y-ci</a>. Not lightweight either, but simple to configure.</li>
  <li>Google‚Äôs Lighthouse also has a <a href="https://github.com/GoogleChrome/lighthouse-ci">Lighthouse CI</a> variant which may be useful when also wanting to have performance and best practice checks.</li>
  <li>An alternative could also be to run HTML validation with <a href="https://validator.github.io/validator/">V.Nu HTML5 validator</a>.</li>
</ul>

<h2 id="what-to-test">What to test</h2>

<p>It‚Äôs not always easy to have test content to run the checks against of in CI. My personal preference is to run the tests against a pattern library‚Äôs components, for example <a href="https://storybook.js.org/">Storybook</a> or <a href="https://github.com/torchbox/django-pattern-library">django-pattern-library</a>. As part of creating the components, we naturally create test data for them similarly to unit tests (TDD or not) ‚Äì this test content can then be used to test the components‚Äô variations for accessibility issues.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Reusable UI components ‚Äì A journey from React to Wagtail]]></title>
    <link href="https://thib.me/reusable-ui-components-journey-from-react-to-wagtail"/>
    <updated>2020-07-31T01:15:22+00:00</updated>
    <id>https://thib.me/reusable-ui-components-journey-from-react-to-wagtail</id>
    <content type="html"><![CDATA[<p>This is Ben Dickinson and I‚Äôs joint <a href="https://us.wagtail.space/">Wagtail Space US 2020</a> talk about pattern libraries at Torchbox, introducing <a href="https://github.com/torchbox/django-pattern-library">django-pattern-library</a>.</p>

<!-- more -->

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/isrOufI7TKc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>Slides: <a href="https://docs.google.com/presentation/d/1pZAbunn0Ci8B9NR0mS5taOPe7BMdAiDrKNIcd9xBWO4/edit">Wagtail Space US 2020 - Reusable UI components ‚Äì A journey from React to Wagtail</a></p>

<hr />

<h2 id="pattern-libraries-as-a-methodology">Pattern libraries as a methodology</h2>

<h3 id="atomic-design">Atomic Design</h3>

<h3 id="pattern-lab">Pattern Lab</h3>

<h2 id="react">React</h2>

<h3 id="a-paradigm-shift">A paradigm shift</h3>

<ul>
  <li>Component-driven UIs</li>
  <li>Functional programming for UIs</li>
  <li>Not a template language</li>
</ul>

<h3 id="what-makes-react-good-in-practice">What makes React good in practice</h3>

<ul>
  <li>Nice developer experience</li>
  <li>Reusable components</li>
  <li>Maintainable, testable code</li>
  <li>Component-driven development with Storybook</li>
</ul>

<h3 id="pattern-libraries-at-torchbox">Pattern libraries at Torchbox</h3>

<p>The codified interface between front-end and back-end work</p>

<ul>
  <li>Clarifies responsibilities, separates concerns, both in code, and as members of a development team</li>
  <li>If needed, makes it possible for front-end developers to work on pages and block templates before the models are done</li>
  <li>Encourages code reuse ‚Äì defining independent UI components, easy to port to other projects</li>
</ul>

<h3 id="current-trends-design-systems">Current trends: design systems</h3>

<ul>
  <li><a href="https://designsystem.digital.gov/">USWDS</a></li>
  <li><a href="https://design-system.service.gov.uk/">GOV.UK Design System</a></li>
  <li><a href="https://luna.sainsburys.co.uk/">Sainsbury‚Äôs Luna</a></li>
  <li><a href="https://decanter.stanford.edu/">Stanford‚Äôs Decanter</a></li>
</ul>

<h2 id="why-develop-another-pattern-library-tool">Why develop another pattern library tool?</h2>

<h3 id="challenges">Challenges</h3>

<ul>
  <li>Most of our projects are not API-driven React SPAs - they‚Äôre vanilla Django/Wagtail</li>
  <li>Django has a proprietary template language</li>
  <li>Translating non-Django templates from a pattern library is time-consuming and error-prone</li>
  <li>Duplicating templates is a maintenance burden and often leads to divergence</li>
</ul>

<h3 id="more-challenges">More challenges!</h3>

<ul>
  <li>Template tags are great, but are discouraged by using a pattern library that doesn‚Äôt support them</li>
  <li>Tags often depend on the database (e.g. <code class="language-plaintext highlighter-rouge">include_block foo</code>)</li>
  <li>Visual testing requires time-consuming manual setup</li>
  <li>Django‚Äôs native testing tools are inadequate for visual testing - especially cross-browser</li>
</ul>

<h3 id="pattern-lab-goes-django">Pattern Lab goes Django!</h3>

<p>pip install django-pattern-library</p>

<h3 id="features">Features</h3>

<ul>
  <li>Component playground for Django template partials</li>
  <li>Mock template context from YAML files</li>
  <li>Template documentation in markdown</li>
  <li>Mock out template tags (both built-in and user-defined tags)</li>
</ul>

<h3 id="advantages">Advantages</h3>

<ul>
  <li>No duplication of templates - the pattern library uses the real templates</li>
  <li>All components can be viewed in one place</li>
  <li>Easier visual testing</li>
  <li>No need for content in the DB</li>
  <li>Front-end development can happen before the models are ready</li>
</ul>

<h3 id="known-issues">Known issues</h3>

<ul>
  <li>Documentation is good but could be much better</li>
  <li>Context merging is fragile and requires some repetition in YAML files</li>
  <li>Template tag mocking is not flexible enough</li>
  <li>No support for mocking filters yet</li>
  <li>Richer objects are fiddly to mock (e.g. ``)</li>
</ul>

<h2 id="demo-time">Demo time!</h2>

<h3 id="first-demo">First demo</h3>

<h3 id="second-demo">Second demo</h3>

<p><a href="https://storybook-django.herokuapp.com/?path=/docs/django-patterns-streamfield-quote-block--default">storybook-django</a></p>

<h2 id="takeaways-">Takeaways üåà</h2>

<h3 id="why-we-recommend-this-approach">Why we recommend this approach</h3>

<ul>
  <li>As a methodology: speeds up the process for medium to large sites</li>
  <li>Reusable components: Encourages code reuse and UI consistency across the site</li>
  <li>Testing opportunities: Manual ‚Äúunit tests‚Äù for UI components, &amp; opportunities for automated visual regression / E2E / accessibility tests</li>
</ul>

<h3 id="ready-to-use">Ready to use</h3>

<ul>
  <li>Used for all production Wagtail sites at Torchbox: <a href="https://github.com/torchbox/django-pattern-library">django-pattern-library</a></li>
  <li>Experimental, used on two projects, feedback welcome: <a href="https://github.com/torchbox/storybook-django">storybook-django</a></li>
  <li>For all our React projects: <a href="https://storybook.js.org/">Storybook</a></li>
</ul>

<h3 id="ready-for-contributions-">Ready for contributions üò¨</h3>

<ul>
  <li>Open-sourced <a href="https://github.com/torchbox/django-pattern-library">django-pattern-library</a> a few months ago</li>
  <li><a href="https://github.com/torchbox/storybook-django">storybook-django</a> still very experimental</li>
  <li>Feedback welcome</li>
</ul>

<p>Backlog for the next three months: <a href="https://github.com/torchbox/django-pattern-library/projects/3">github.com/torchbox/django-pattern-library/projects/3</a></p>

<h2 id="thank-you">Thank you!</h2>

<p>Thank you to Dan, Tom, William, Nick for helping us rehearse!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Accessibility wins for Wagtail projects]]></title>
    <link href="https://thib.me/accessibility-wins-for-wagtail-projects"/>
    <updated>2020-07-30T01:15:22+00:00</updated>
    <id>https://thib.me/accessibility-wins-for-wagtail-projects</id>
    <content type="html"><![CDATA[<p>I recently gave a talk at <a href="https://us.wagtail.space/">Wagtail Space US 2020</a> about the accessibility of Wagtail websites ‚Äì following on last year‚Äôs talk about the <a href="/making-wagtail-accessible">accessibility of the Wagtail admin</a>.</p>

<!-- more -->

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/ZcHfUu_u4e0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>Slides: <a href="https://docs.google.com/presentation/d/14iSPklZmrjlMZlaFOBP1Mavt_tmz6vcF_t6cHVCCek8/edit">Wagtail Space US 2020 - Accessibility wins for Wagtail projects</a></p>

<hr />

<h2 id="why-accessibility-matters">Why accessibility matters</h2>

<h3 id="inclusive-experiences">Inclusive experiences</h3>

<ul>
  <li>We want all users to have a great experience, no matter how they use the web.</li>
  <li>Accessibility improvements lead to usability improvements for all.</li>
</ul>

<p>Search: ‚ÄúCurb cut effect‚Äù</p>

<h3 id="accessibility-is-not-an-optional-extra">Accessibility is not an optional extra</h3>

<p>USA:</p>

<ul>
  <li><a href="https://section508.gov/">Section 508</a> for recipients of federal funding, <a href="https://www.ada.gov/">ADA</a> for all*.</li>
</ul>

<p>EU/UK:</p>

<ul>
  <li><a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX%3A32016L2102">EU Directive 2016/2102</a> for the public sector, UK <a href="https://www.legislation.gov.uk/ukpga/2010/15/contents">Equality Act 2010</a> for all.</li>
</ul>

<p>In the end it‚Äôs all based on <a href="https://www.w3.org/TR/WCAG21/">WCAG 2.1 AA</a>.</p>

<p>* I‚Äôm not a lawyer. See <a href="https://gizmodo.com/gimlet-media-sued-for-not-making-podcasts-accessible-to-1844369021">Gimlet Media lawsuit</a></p>

<h3 id="oh-and-its-not-just-about-wagtail-sites">Oh and it‚Äôs not just about Wagtail sites</h3>

<p>Intranets, CRMs, ERPs, dashboards. Django admin.</p>

<p>Internal-only tools shouldn‚Äôt compromise on accessibility just because their audience is smaller.</p>

<p><a href="https://alistapart.com/article/building-the-woke-web/">alistapart.com/article/building-the-woke-web</a></p>

<h2 id="common-wagtail-issues">Common* Wagtail issues</h2>

<p>* Very common. Go check your sites after the talk</p>

<h3 id="alt-text-for-images">Alt text for images</h3>

<ol>
  <li>Images‚Äô Title fields are auto-populated with file names on upload</li>
  <li>Wagtail sets alt text based on image Title by default</li>
  <li>????</li>
</ol>

<p>Solution: always have an ‚Äúalt text‚Äù field wherever an image is used.</p>

<p><a href="https://github.com/wagtail/rfcs/pull/51">RFC #51</a>, <a href="https://github.com/wagtail/wagtail/issues/4945">#4945</a>, <a href="https://github.com/wagtail/rfcs/pull/44">RFC #44</a>, <a href="https://github.com/wagtail/wagtail/pull/5789">#5789</a></p>

<h3 id="alt-text-for-images-2">Alt text for images, #2</h3>

<ul>
  <li>Have a mandatory alt text field when images aren‚Äôt decorative‚Ä¶</li>
  <li>Display it</li>
</ul>

<p>Solution: always have an ‚Äúalt text‚Äù field wherever an image is used.</p>

<p><a href="https://github.com/wagtail/rfcs/pull/51">RFC #51</a>, <a href="https://github.com/wagtail/wagtail/issues/4945">#4945</a>, <a href="https://github.com/wagtail/rfcs/pull/44">RFC #44</a>, <a href="https://github.com/wagtail/wagtail/pull/5789">#5789</a></p>

<h3 id="alt-text-for-images-3">Alt text for images, #3</h3>

<ul>
  <li>Always have an alt text field for each usage of an image</li>
  <li>Make sure the field is optional when appropriate so decorative images can be hidden</li>
  <li>Give appropriate guidance to editors, <a href="https://axesslab.com/alt-texts/">axesslab.com/alt-texts</a></li>
  <li>Wagtail‚Äôs rich text images alt text needs to become optional</li>
</ul>

<p>Solution: always have an ‚Äúalt text‚Äù field wherever an image is used.</p>

<p><a href="https://github.com/wagtail/rfcs/pull/51">RFC #51</a>, <a href="https://github.com/wagtail/wagtail/issues/4945">#4945</a>, <a href="https://github.com/wagtail/rfcs/pull/44">RFC #44</a>, <a href="https://github.com/wagtail/wagtail/pull/5789">#5789</a></p>

<h3 id="embed-titles">Embed titles</h3>

<ul>
  <li>In some cases, Wagtail embeds don‚Äôt have a title attribute set</li>
  <li>Screen reader users need it to know what the embed is, and decide to browse it, or skip it</li>
</ul>

<p>Solution: either check your embed provider returns a title in 100% of the cases, or add a mandatory ‚ÄúTitle‚Äù field for all embeds.</p>

<p><a href="https://github.com/wagtail/wagtail/issues/5982">#5982</a></p>

<h3 id="heading-levels">Heading levels</h3>

<p>Screen reader users rely on logical, lean heading outlines to navigate pages</p>

<ul>
  <li>Wagtail makes it easy to restrict which heading levels are available in any rich text field. Do it.</li>
  <li>Also restrict which heading levels are available via StreamField</li>
  <li>Keep your templates in check too.</li>
</ul>

<p>Solution: <a href="https://docs.wagtail.io/en/stable/advanced_topics/customisation/page_editing_interface.html#limiting-features-in-a-rich-text-field">Limiting features in a rich text field</a>. Use <a href="https://github.com/neon-jungle/wagtail-accessibility">wagtail-accessibility</a>.</p>

<h3 id="heading-levels-2">Heading levels, #2</h3>

<p>Heading levels</p>

<p>Screen reader users rely on logical, lean heading outlines to navigate pages</p>

<ul>
  <li>Validate that no heading is left empty</li>
  <li>Or, consider hiding empty headings with CSS (h2:empty { display: none; })</li>
</ul>

<p>Solution: <a href="https://docs.wagtail.io/en/stable/advanced_topics/customisation/page_editing_interface.html#limiting-features-in-a-rich-text-field">Limiting features in a rich text field</a>. Use <a href="https://github.com/neon-jungle/wagtail-accessibility">wagtail-accessibility</a>.</p>

<p>In the future ‚Äì rich text rewriting to remove empty headings? <a href="https://github.com/wagtail/wagtail/issues/4223">#4223</a></p>

<h3 id="other-issues-worth-knowing-about">Other issues worth knowing about</h3>

<ul>
  <li>TableBlock
    <ul>
      <li>The Caption field should be mandatory</li>
      <li>The header cells field should be mandatory (<a href="https://github.com/wagtail/wagtail/issues/5989">#5989</a>)</li>
    </ul>
  </li>
  <li>Links
    <ul>
      <li>We need a way to flag / validate link text to avoid ‚ÄúRead more‚Äù, ‚ÄúClick here‚Äù, ‚ÄúFind out more‚Äù</li>
      <li>Or having a way to add custom aria-label where relevant</li>
      <li>Broken links should be user-friendly, not href=‚ÄùNone‚Äù.</li>
    </ul>
  </li>
  <li>Forms
    <ul>
      <li>Avoid Django‚Äôs as_table, as_ul rendering.</li>
    </ul>
  </li>
</ul>

<h2 id="content-wins">Content wins</h2>

<ul>
  <li><a href="https://github.com/neon-jungle/wagtail-accessibility">wagtail-accessibility</a> (based on <a href="https://khan.github.io/tota11y/">tota11y</a>)</li>
  <li>help_text (example: <a href="https://github.com/nhsuk/wagtail-nhsuk-frontend">wagtail-nhsuk-frontend</a>)</li>
  <li><a href="https://docs.wagtail.io/en/stable/reference/pages/panels.html#helppanel">HelpPanel</a> ‚Äì help_text but bigger</li>
  <li><a href="https://vixdigital.github.io/draftail-plugins/">wagtail-readinglevel</a></li>
  <li>Rich text experiments: guidelines-aware spellcheck</li>
  <li>Rich text experiments: sentence length, <a href="https://wooorm.com/readability/">wooorm.com/readability</a></li>
</ul>

<h2 id="developer-wins">Developer wins</h2>

<p><a href="https://torchbox.com/blog/accessibility-audits/">Accessibility audits: getting started</a></p>

<h3 id="django-html-validator"><a href="https://github.com/peterbe/django-html-validator">django-html-validator</a></h3>

<p>Based on the official v.Nu validator. Very easy to integrate into your workflow with Docker.</p>

<ul>
  <li>
    <p>Finds <a href="https://alphagov.github.io/accessibility-tool-audit/">about 15% of issues</a></p>
  </li>
  <li>
    <p>v.Nu also has a CLI which I recommend as part of accessibility audits</p>
  </li>
</ul>

<h3 id="static-analysis">Static analysis</h3>

<ul>
  <li>React: <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y">eslint-plugin-jsx-a11y</a></li>
  <li>Vue: <a href="https://github.com/maranran/eslint-plugin-vue-a11y">eslint-plugin-vue-a11y</a></li>
  <li>Styles: <a href="https://github.com/YozhikM/stylelint-a11y">stylelint-a11y</a></li>
</ul>

<h3 id="curlylint">Curlylint</h3>

<h3 id="learn-how-to-use-a-screen-reader">Learn how to use a screen reader</h3>

<p>On a Mac with VoiceOver,</p>

<ul>
  <li>Cmd + F5 to open VoiceOver. Same to close it.</li>
  <li>Ctrl to silence it</li>
  <li>Ctrl + U to open the rotor</li>
</ul>

<p>That‚Äôs it.</p>

<p>Even simpler on iOS.</p>

<p><a href="https://a11ysupport.io/learn/">a11ysupport.io / learn</a></p>

<h2 id="community-wins">Community wins</h2>

<p>A cultural shift?</p>

<h3 id="you-can-be-the-person-on-your-team-who-advocates-for-those-issues-to-be-fixed">You can be the person on your team who advocates for those issues to be fixed</h3>

<p>It matters on all projects, all audiences</p>

<p>There are well-defined standards, and readily available tools.</p>

<p>You can be the person who knows how to use a screen reader and shows others how to do it.</p>

<p><a href="https://alistapart.com/article/building-the-woke-web/">alistapart.com/article/building-the-woke-web</a></p>

<h3 id="wagtail-can-be-a-cms-thats-part-of-the-solution">Wagtail can be a CMS that‚Äôs part of the solution</h3>

<p>The <a href="https://webaim.org/projects/million/">WebAIM Million</a> keeps track of the accessibility of 1M websites‚Äô homepages</p>

<ul>
  <li>Numbers are appalling</li>
  <li>We can do better</li>
  <li>Wagtail can help people make accessible websites ‚Äì better defaults, starter templates, documentation</li>
</ul>

<h3 id="accessibility-team-">Accessibility team üåà</h3>

<p>The <a href="https://github.com/wagtail/wagtail/wiki/Accessibility-team">accessibility team</a> focuses on improvements to the accessibility of Wagtail, and of websites built with Wagtail. Everyone is welcome regardless of skill level or background.</p>

<p>Find us on the Wagtail Slack in <a href="https://github.com/wagtail/wagtail/wiki/Slack">#accessibility</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Curlylint: Accessibility linting rules]]></title>
    <link href="https://thib.me/curlylint-accessibility-linting-rules"/>
    <updated>2020-07-26T02:22:49+00:00</updated>
    <id>https://thib.me/curlylint-accessibility-linting-rules</id>
    <content type="html"><![CDATA[<p>Curlylint now comes with 7 accessibility-related rules, ready to use in HTML templates. See <a href="https://www.curlylint.org/docs/rules/all">All rules</a> for details about the individual rules.</p>

<!-- more -->

<p>This is an important milestone for the linter ‚Äì essentially demonstrating its usefulness once and for all, if that was still needed.</p>

<h2 id="html-best-practices">HTML best practices</h2>

<p>Most of the rules Curlylint currently ships with are very simple ‚ÄúHTML linting‚Äù rules for accessibility, based on established best practice:</p>

<ul>
  <li><a href="https://www.curlylint.org/docs/rules/aria_role"><code class="language-plaintext highlighter-rouge">aria_role</code></a> just checks that <code class="language-plaintext highlighter-rouge">role</code> attributes are valid.</li>
  <li>Same for <a href="https://www.curlylint.org/docs/rules/html_has_lang"><code class="language-plaintext highlighter-rouge">html_has_lang</code></a>, for the <code class="language-plaintext highlighter-rouge">html</code> <code class="language-plaintext highlighter-rouge">lang</code> attribute.</li>
  <li>Same for <a href="https://www.curlylint.org/docs/rules/image_alt"><code class="language-plaintext highlighter-rouge">image_alt</code></a>, <a href="https://www.curlylint.org/docs/rules/meta_viewport"><code class="language-plaintext highlighter-rouge">meta_viewport</code></a>, <a href="https://www.curlylint.org/docs/rules/no_autofocus"><code class="language-plaintext highlighter-rouge">no_autofocus</code></a>, <a href="https://www.curlylint.org/docs/rules/tabindex_no_positive"><code class="language-plaintext highlighter-rouge">tabindex_no_positive</code></a>!</li>
</ul>

<p>See a pattern? All of these are variations on the same theme of ‚ÄúHTML attributes should only contain a limited range of values based on established best practices‚Äù. This is great news for this project ‚Äì¬†it means there can be quite a lot of results achieved with minimal complexity when it comes to creating individual rules.</p>

<p>In the future, this could easily be taken further to cover:</p>

<ul>
  <li>Security best practices, for example <code class="language-plaintext highlighter-rouge">rel="noopener"</code>, or disallowing <code class="language-plaintext highlighter-rouge">javascript:</code> URLs in <code class="language-plaintext highlighter-rouge">href</code>.</li>
  <li>HTML maintainability best practices, for example disallowing duplicate class attributes.</li>
  <li>And of course, more accessibility and ARIA best practices.</li>
</ul>

<p>Obligatory mention of <a href="https://github.com/jsx-eslint/eslint-plugin-jsx-a11y">eslint-plugin-jsx-a11y</a>, which has been a huge source of inspiration. Generally, modern React tooling has this figured out, with extensive static analysis available. For me, this isn‚Äôt just a nice-to-have ‚Äì it‚Äôs hard to always keel all of those best practices in mind, and linting is there to automate this for you. Note this isn‚Äôt just React ‚Äì Vue has its <a href="https://github.com/maranran/eslint-plugin-vue-a11y">eslint-plugin-vue-a11y</a> too!</p>

<h2 id="templates-best-practices">Templates best practices</h2>

<p>This doesn‚Äôt have to stop at HTML. Curlylint already supports parsing template syntax, attempting to be usable as a linter for Jinja, Twig, Liquid, <a href="https://www.curlylint.org/docs/template-languages">and the likes</a>. We can also have rules to enforce best practices for this template syntax.</p>

<p>The first example of such a rule is <a href="https://www.curlylint.org/docs/rules/django_forms_rendering"><code class="language-plaintext highlighter-rouge">django_forms_rendering</code></a>, which restricts how forms can be rendered in Django projects, for accessibility reasons. I‚Äôm very excited about opportunities like this to codify and share best practices in a way that scales well.</p>

<ul>
  <li>Hopefully there will be more <a href="https://github.com/django/deps/pull/69">linting rules for Django</a> coming in the future.</li>
  <li>And more linting rules <a href="https://github.com/wagtail/wagtail/issues/6090">for Wagtail</a> as well.</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Curlylint: Brand new rules documentation]]></title>
    <link href="https://thib.me/curlylint-brand-new-rules-documentation"/>
    <updated>2020-07-18T22:05:21+00:00</updated>
    <id>https://thib.me/curlylint-brand-new-rules-documentation</id>
    <content type="html"><![CDATA[<p>Have I mentioned <a href="/welcome-to-curlylint">how important I think it is for a linter to have great docs</a>? Well, now is the time for Curlylint to live up to this!</p>

<!-- more -->

<h2 id="new-documentation-format-for-rules">New documentation format for rules</h2>

<p>Up until now the rules‚Äô documentation was pretty sad, essentially limited to what could fit in the project‚Äôs README. Now‚Ä¶ take a look:</p>

<p><a href="https://www.curlylint.org/docs/rules/image_alt"><img src="/images/blog/curlylint-brand-new-rules-documentation/new-rules-docs.png" alt="Screen capture of the image_alt rule‚Äôs documentation" /></a></p>

<ul>
  <li>The rule‚Äôs different configuration options are clearly visible, copy-pasteable, each with a description.</li>
  <li>Cases where the rule check ‚Äúsucceeds‚Äù are well documented, alongside a comment, and matching configuration.</li>
  <li>Same for problematic cases, which even show the actual error message!</li>
  <li>All of this is toggle-able between the different configuration formats supported by Curlylint!</li>
  <li>There are follow-up resources available for developers who want more information about the rule.</li>
</ul>

<p>This feels like a pretty big step up compared to the previous documentation, and should hopefully make it as easy as possible for people to start using the linter for their templates.</p>

<h2 id="how-this-works">How this works</h2>

<p>The majority of the rules‚Äô documentation is generated from their metadata:</p>

<h3 id="json-schema">JSON Schema</h3>

<p>The configuration options are all defined with <a href="https://json-schema.org/">JSON Schema</a>.Currently this is only used to generate the documentation, but in the future I would also like to make this validate configurations as Curlylint runs.</p>

<p>JSON Schema is particularly good for this because it has built-in support for the schema to be self-documenting ‚Äì adding titles, descriptions, and examples, which are all used to generate the documentation. Here is the schema of the <a href="https://www.curlylint.org/docs/rules/html_has_lang"><code class="language-plaintext highlighter-rouge">html_has_lang</code></a> rule as an example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"oneOf"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"const"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The `lang` attribute must be present."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="kc">true</span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The `lang` attribute must match the configured language tag."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"en-US"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="test-cases">Test cases</h3>

<p>The success / fail sections are simply coming from the project‚Äôs test suite! I always prefer to invest time writing extensive unit tests for projects of this kind. Some of the test cases simply have a flag marking them as ‚Äúdocumentation examples‚Äù:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Check lang is present"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;html lang=</span><span class="se">\"</span><span class="s2">en</span><span class="se">\"</span><span class="s2">&gt;&lt;/html&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>It‚Äôs the same story for ‚Äúfail‚Äù cases, where the annotations are simply generated from the expected output (issues):</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Missing"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;html&gt;&lt;/html&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.html"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"column"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"line"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"html_has_lang"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The `&lt;html&gt;` tag should have a `lang` attribute with a valid value, describing the main language of the page"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="mdx">MDX</h3>

<p>All of this comes together with <a href="https://mdxjs.com/">MDX</a>, a Markdown-inspired syntax which makes it possible to use JSX directly inside documents, thereby making it possible to use React components, like the language tabs and code snippets with annotations:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">Tabs</span>
  <span class="na">groupId</span><span class="p">=</span><span class="s">"config-language"</span>
  <span class="na">defaultValue</span><span class="p">=</span><span class="s">"toml"</span>
  <span class="na">values</span><span class="p">=</span><span class="si">{</span><span class="p">[</span>
    <span class="p">{</span> <span class="na">label</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TOML</span><span class="dl">"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">toml</span><span class="dl">"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">label</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Shell</span><span class="dl">"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">shell</span><span class="dl">"</span> <span class="p">},</span>
  <span class="p">]</span><span class="si">}</span>
<span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nc">TabItem</span> <span class="na">value</span><span class="p">=</span><span class="s">"toml"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">CodeSnippet</span>
      <span class="na">snippet</span><span class="p">=</span><span class="si">{</span><span class="s2">`# The </span><span class="se">\`</span><span class="s2">alt</span><span class="se">\`</span><span class="s2"> attribute must be present.\nimage_alt = true`</span><span class="si">}</span>
      <span class="na">annotations</span><span class="p">=</span><span class="si">{</span><span class="p">[]</span><span class="si">}</span>
      <span class="na">lang</span><span class="p">=</span><span class="s">"toml"</span>
    <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nc">TabItem</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nc">TabItem</span> <span class="na">value</span><span class="p">=</span><span class="s">"shell"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">CodeSnippet</span>
      <span class="na">snippet</span><span class="p">=</span><span class="si">{</span><span class="s2">`# The </span><span class="se">\`</span><span class="s2">alt</span><span class="se">\`</span><span class="s2"> attribute must be present.\ncurlylint --rule 'image_alt: true' .`</span><span class="si">}</span>
      <span class="na">annotations</span><span class="p">=</span><span class="si">{</span><span class="p">[]</span><span class="si">}</span>
      <span class="na">lang</span><span class="p">=</span><span class="s">"shell"</span>
    <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nc">TabItem</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nc">Tabs</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>Docusaurus supports MDX out of the box, and provides the ‚ÄúTabs‚Äù components. The CodeSnippet component is originally from Docusaurus but has been customized to support basic annotations.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Interview exercises for web developers]]></title>
    <link href="https://thib.me/interview-exercises-for-web-developers"/>
    <updated>2020-07-05T22:05:21+00:00</updated>
    <id>https://thib.me/interview-exercises-for-web-developers</id>
    <content type="html"><![CDATA[<p>Here are a couple of interview exercises I like to give, which are relatively open to varied approaches.</p>

<!-- more -->

<h2 id="before-the-interview-form-validation">Before the interview: Form validation</h2>

<p>I‚Äôve always liked Springload‚Äôs <a href="https://github.com/springload/form-validation-problem">form validation problem</a>. It‚Äôs a relatively simple problem in apparence ‚Äì¬†implementing form validation for a basic HTML form, with a few fields, and a few validation rules.</p>

<p>What I think makes it really good is that it‚Äôs possible to approach this in many different ways ‚Äì and there are lots of things for candidates to demonstrate beyond the basic implementation of the form validation ‚Äì¬†knowledge in any of those areas:</p>

<ul>
  <li>Documentation</li>
  <li>Accessibility</li>
  <li>Progressive enhancement</li>
  <li>Browser support</li>
  <li>Testing</li>
  <li>Tooling</li>
</ul>

<p>Form validation is a particularly interesting problem in web development because there is a fair amount of state to manage ‚Äì validation errors for each fields, as well as whether the fields have been interacted with or not to decide when to display the errors.</p>

<p>Candidates can take a shot at this with vanilla JS, a ready-made library like <a href="https://parsleyjs.org/">Parsley</a>, or can be asked to do this with React (Redux Forms, Formik, bespoke?), or even back-end technologies.</p>

<h2 id="at-the-interview-build-this">At the interview: Build This</h2>

<p>This is my go-to ‚Äúhow would you do this‚Äù problem, initially encountered at Codemate, which can be used to interview full-stack developers (any stack), or front-end or back-end only. The candidate is shown a specific UI (via a wireframe, screenshot, or real-world app), and is then asked to explain how they would build it within the context of a real project.</p>

<p>Depending on the candidate‚Äôs experience level, role, (and level of interview stress), this can be run as an open-ended conversation driven by the candidate directly, or as a series of guided themes / questions.</p>

<p>The whole exercise takes 30min to 1h depending on what is covered ‚Äì spend a good 5 mins on the problem statement + intro &amp; architecture, then move through the themes.</p>

<p>I really like this because:</p>

<ul>
  <li>It makes for a more conversational interview ‚Äì¬†even if the questions are fixed, it‚Äôs more natural to have them with a specific app to think about.</li>
  <li>For candidates, it makes it easier to relate to their past work, for example reflecting on similar apps they‚Äôve built.</li>
  <li>For interviewers, it does give enough structure to the interview that candidates‚Äô answers can easily be categorised on the fly, and then compared to those of other candidates.</li>
</ul>

<p>This works particularly well if the wireframe has quite a few things going on visually, with different types of data, a user account, and a form or two.</p>

<h2 id="template-build-this-twitter-clone">Template: Build This Twitter Clone</h2>

<p><img src="/images/blog/interview-exercises-for-web-developers/twitter-wireframe.png" alt="Wireframe of a Twitter clone, showing a logged-in user‚Äôs timeline, with few tweets, a form to post a new tweet, and the user‚Äôs profile details" /></p>

<p><em>Placeholder wireframe from <a href="https://www.flickr.com/photos/doos/4689874175/in/photostream/">Rob Enslin</a></em></p>

<h3 id="fundamentals">Fundamentals</h3>

<ul>
  <li><strong>Introduction</strong>
    <ul>
      <li>Identify the features of this UI</li>
      <li>Identify the underlying data / models</li>
    </ul>
  </li>
  <li><strong>Tech stack and architecture</strong>
    <ul>
      <li>Rough architecture of the app (front-end and back-end)</li>
      <li>Overall stack, centred around <code class="language-plaintext highlighter-rouge">&lt;tech we care about&gt;</code></li>
    </ul>
  </li>
  <li><strong>Integrations &amp; APIs</strong>
    <ul>
      <li>Integration with the backend, endpoints and payloads</li>
      <li>Client-side integrations</li>
    </ul>
  </li>
  <li><strong>Data management</strong>
    <ul>
      <li>State management tools with <code class="language-plaintext highlighter-rouge">&lt;tech&gt;</code></li>
      <li>Data flow for a given feature (e.g. search)</li>
    </ul>
  </li>
</ul>

<h4 id="electives">Electives</h4>

<ul>
  <li><strong>Mobile-friendly UI</strong>
    <ul>
      <li>RWD, cross-browser support</li>
      <li>Offline capabilities</li>
    </ul>
  </li>
  <li><strong>Security</strong>
    <ul>
      <li>Security considerations for a new feature: user accounts with saved searches</li>
    </ul>
  </li>
  <li><strong>Testing / Tooling</strong></li>
  <li><strong>Accessibility</strong></li>
  <li><strong>Performance</strong></li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Procuring accessibility audits]]></title>
    <link href="https://thib.me/procuring-accessibility-audits"/>
    <updated>2020-07-03T18:15:08+00:00</updated>
    <id>https://thib.me/procuring-accessibility-audits</id>
    <content type="html"><![CDATA[<p>Following from <a href="/accessibility-audits-getting-started">Accessibility audits: getting started</a>, here are practical tips on how to procure / schedule an accessibility audit, and how to structure the report.</p>

<!-- more -->

<p>Accessibility audits can take anywhere from 10 minutes to a week, depending on the scope of the audit, the amount of manual testing required, and the expected report format.</p>

<p>The main factors for an estimate are:</p>

<ul>
  <li>What‚Äôs the purpose of the audit? Do we want a ‚Äúcompliant = yes/no‚Äù, or create a backlog of improvements, or something in-between</li>
  <li>What‚Äôs the scope? How many sites / page types / pages. Provide links to a few pages so we have a sense of how many issues we‚Äôre likely to find (the more, the longer it takes to report them).</li>
  <li>What kind of report / output do they need? Either something for stakeholders, or developers, or both. Generally it takes nearly as much time to write the report as to find the issues.</li>
</ul>

<p>Avoid compliance pass/fail audits, which are onerous, and for which we aren‚Äôt competent. Get in touch with <a href="https://digitalaccessibilitycentre.org/">DAC</a>, <a href="https://www.rnib.org.uk/rnib-business">RNIB</a>, <a href="https://abilitynet.org.uk/accessibility-services/products-and-services">AbilityNet</a>, or <a href="https://www.deque.com/">Deque</a>.</p>

<p><strong>Suggested format for medium websites</strong>: ‚Äúbacklog of improvements‚Äù, for which we can make a proposal for 1 to 4 days, based on automated tests, manual tests for 5 to 10 page types. A one-pager ‚Äúexecutive summary‚Äù report, and adjoining list of issues / backlog as a spreadsheet or Trello board.</p>

<h2 id="audit-strategy">Audit strategy</h2>

<h3 id="target-standards">Target standards</h3>

<p>First, define the target standard for the audit. Generally WCAG 2.1 AA, or Section 508. We will consider the latest Section 508 version, post January 2018 update to track WCAG2.0 AA.</p>

<p>If relevant, also define which standards are out of scope, such as compliance for the Rehabilitation Act and ADA. Compliance for WCAG2.1 AAA is out of scope, but we may provide AAA issues as relevant if they seem to be easily solvable.</p>

<h3 id="audit-scope">Audit scope</h3>

<p>Make a clear list of URLs to audit. Define whether the audit is on a production or staging environment. If there is any dynamic functionality to audit, define to what extent.</p>

<h3 id="report-format">Report format</h3>

<blockquote>
  <p>Keep it actionable. We don‚Äôt want to do pass/fail compliance audits.</p>
</blockquote>

<ul>
  <li>‚ÄúCover sheet‚Äù / written document with overview of common issues, and a scoring of how feasible it seems to reach compliance &amp; effort involved.</li>
  <li>Tabular data / spreadsheet with individual issues at a more granular level. Including testing tool if relevant, &amp; proposed solution if time allows.</li>
  <li>As relevant, direct output from automated / semi-automated testing tools</li>
</ul>

<h3 id="high-level-testing-methodology">High-level testing methodology</h3>

<blockquote>
  <p>See <a href="/accessibility-audits-getting-started">Accessibility audits: getting started</a>.</p>
</blockquote>

<p>This is a baseline only, please adapt as needed. For all identified pages,</p>

<ul>
  <li>Bulk automated page checks with <a href="https://validator.github.io/validator/">V.Nu HTML5 validator</a></li>
  <li>Bulk automated page checks with <a href="https://github.com/pa11y/pa11y">Pa11y</a> ‚Äì HTML CodeSniffer, Axe.</li>
</ul>

<p>For a relevant subset of pages,</p>

<ul>
  <li>Single-page semi-automated checks with either <a href="https://accessibilityinsights.io/">Accessibility Insights</a> or similar.</li>
  <li>Manual keyboard navigation checks</li>
  <li>Manual colour contrast check for non-text UI elements and images</li>
  <li>Manual screen reader navigation check with VoiceOver in macOS Safari</li>
  <li>Manual zoom &amp; magnification testing with Chrome &amp; macOS Zoom</li>
</ul>

<p>For a smaller subset of high-value pages,</p>

<ul>
  <li>Full screen reader testing with VoiceOver in macOS Safari</li>
  <li>Full screen reader testing with NVDA in Firefox ESR</li>
  <li>Full screen reader testing with VoiceOver in iOS Safari</li>
  <li>Mobile touch interaction testing with iOS Safari</li>
</ul>

<h2 id="outcome-of-the-audit">Outcome of the audit</h2>

<ul>
  <li>Report to project stakeholders</li>
  <li>Guidance for implementers</li>
  <li>Report to other vendors if needed</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Welcome to curlylint.org!]]></title>
    <link href="https://thib.me/welcome-to-curlylint"/>
    <updated>2020-06-19T22:03:29+00:00</updated>
    <id>https://thib.me/welcome-to-curlylint</id>
    <content type="html"><![CDATA[<p>Curlylint now has a website! üéâ</p>

<!-- more -->

<p>While the linter itself is still very experimental, and subject to major changes, I believe that having great documentation is a much more important step than any single feature or linting rule of the linter. Particularly:</p>

<ul>
  <li>Documenting the rules, with their respective configuration options, with lots of examples.</li>
  <li>Documenting CLI options, and (hopefully) future editor integrations.</li>
</ul>

<p>With a standalone site (as opposed to Markdown files in GitHub), I can create clean URLs for each of the rules, that can then be used directly in the CLI‚Äôs output. This is all inspired by <a href="https://eslint.org/">ESLint</a>, which is years ahead of any other static analysis tool I‚Äôve ever used.</p>

<p><img src="/images/blog/welcome-to-curlylint/eslint-awesome.gif" alt="Screen capture of ESLint in VS Code, with link to a rule‚Äôs documentation, and options to automatically disable the rule" /></p>

<blockquote>
  <p>ESLint‚Äôs VS Code integration, with link straight to the rule‚Äôs documentation, and options to auto-disable the violation.</p>
</blockquote>

<h2 id="the-website">The website</h2>

<p>The website itself is built with <a href="https://v2.docusaurus.io/">Docusaurus v2</a>. I don‚Äôt think this matters too much ‚Äì the main features I was after were:</p>

<ul>
  <li>A focus on documentation websites ‚Äì with versioning, code highlighting.</li>
  <li>Being able to write docs in Markdown without having to worry about creating a theme, or manually writing HTML / CSS.</li>
  <li>Having a blog section and blogging features directly on the same docs website.</li>
</ul>

<p>The fact that it‚Äôs built with React is a plus that will come in handy should I want to build more bespoke pages. MDX is a plus too.</p>

<h2 id="up-next">Up next</h2>

<p>Once the website is up and running, there are two things I‚Äôd really like to make:</p>

<ul>
  <li>An editor integration with VS Code. I‚Äôve had some exposure to this with <a href="https://github.com/stylelint/vscode-stylelint">vscode-stylelint</a>, but still don‚Äôt have the clearest understanding of how best to do this for a Python CLI.</li>
  <li>An online playground similar to that of <a href="https://prettier.io/">Prettier</a>. I think it‚Äôs the best demonstrator of a tool‚Äôs capabilities, and it simplifies bug reports / quick tests greatly.</li>
</ul>

<p>Onwards!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Timing attacks, everywhere]]></title>
    <link href="https://thib.me/timing-attacks-everywhere"/>
    <updated>2020-05-04T21:15:08+00:00</updated>
    <id>https://thib.me/timing-attacks-everywhere</id>
    <content type="html"><![CDATA[<p>Ever heard of <a href="https://en.wikipedia.org/wiki/Timing_attack">timing attacks</a>? Turns out timing attack vulnerabilities are pretty common. It‚Äôs unclear to me how practical those attacks are, but I wouldn‚Äôt risk it.</p>

<!-- more -->

<h2 id="finding-timing-attack-vulnerabilities">Finding timing attack vulnerabilities</h2>

<p>The gist of a timing attack is an <em><a href="http://cwe.mitre.org/data/definitions/208.html">observable timing discrepancy</a></em> in access control code:</p>

<ul>
  <li>Some code compares two values in order to determine whether something is authorised or not, for example comparing the user input with a stored plaintext password, or even comparing a hashed version of the user input against a password hash.</li>
  <li>Turns out, the programming language executing that comparison is smart enough to stop the comparison as early as one of the characters stops matching ‚Äì instead of having to compare all of the characters of the two strings.</li>
  <li>If the execution time of the comparison can be observed¬†‚Äì¬†then an attacker can determine whether their supplied input is getting closer to the compared value, by seeing the execution take gradually longer.</li>
</ul>

<p>What does this look like in practice? This:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PasswordViewRestrictionForm</span><span class="p">(</span><span class="n">forms</span><span class="p">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="p">[...]</span>

    <span class="k">def</span> <span class="nf">clean_password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">'password'</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">data</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">.</span><span class="n">restriction</span><span class="p">.</span><span class="n">password</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">forms</span><span class="p">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s">"The password you have entered is not correct. Please try again."</span><span class="p">))</span>
</code></pre></div></div>

<p>or that:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">authorize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">configured_username</span><span class="p">,</span> <span class="n">configured_password</span><span class="p">):</span>
    <span class="c1"># [...]
</span>    <span class="k">if</span> <span class="n">username</span> <span class="o">==</span> <span class="n">configured_username</span> <span class="ow">and</span> <span class="n">password</span> <span class="o">==</span> <span class="n">configured_password</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
</code></pre></div></div>

<p>‚Ä¶or <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-7576">in Ruby (Rails)</a>,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">ClassMethods</span>
  <span class="k">def</span> <span class="nf">http_basic_authenticate_with</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
    <span class="n">before_filter</span><span class="p">(</span><span class="n">options</span><span class="p">.</span><span class="nf">except</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:password</span><span class="p">,</span> <span class="ss">:realm</span><span class="p">))</span> <span class="k">do</span>
      <span class="n">authenticate_or_request_with_http_basic</span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="ss">:realm</span><span class="p">]</span> <span class="o">||</span> <span class="s2">"Application"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">password</span><span class="o">|</span>
        <span class="nb">name</span> <span class="o">==</span> <span class="n">options</span><span class="p">[</span><span class="ss">:name</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">password</span> <span class="o">==</span> <span class="n">options</span><span class="p">[</span><span class="ss">:password</span><span class="p">]</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>or <a href="https://github.com/flawyte/now-basic-auth/issues/4">in Node (Express)</a>,</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">protect</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">/admin</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">pass</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">user</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="nx">pass</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">directory</span><span class="p">:</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/_static</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">realm</span><span class="p">:</span> <span class="dl">"</span><span class="s2">now-basic-auth.node-static-auth</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">onAuthFailed</span><span class="p">:</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">"</span><span class="s2">Restricted area, please login (admin:admin).</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Once you know what to look for, timing attack vulnerabilities really are everywhere. In <a href="https://github.com/flawyte/now-basic-auth/issues/4">basic auth code</a>. In <a href="https://github.com/tm-kn/django-basic-auth-ip-whitelist/security/advisories/GHSA-m38j-pmg3-v5x5">more basic auth code</a>, and also in <a href="https://github.com/wagtail/wagtail/security/advisories/GHSA-jjjr-3jcw-f8v6">password-protected content</a>.</p>

<p>For me, this came up because I was looking for a good Express basic auth implementation, stumbled upon <a href="https://github.com/LionC/express-basic-auth">express-basic-auth</a>, which works well, and then wondered ‚Äì ‚Äúoh, are other libraries using a <a href="https://nodejs.org/api/crypto.html#crypto_crypto_timingsafeequal_a_b">timing-safe comparison function</a>?‚Äù Lots weren‚Äôt.</p>

<h2 id="protecting-yourself">Protecting yourself</h2>

<p>As mentioned above, all sensitive comparison checks should use timing-safe comparison functions such as Node‚Äôs <a href="https://nodejs.org/api/crypto.html#crypto_crypto_timingsafeequal_a_b">crypto.timingSafeEqual</a> or Python 3.4+‚Äôs <a href="https://docs.python.org/3/library/hmac.html#hmac.compare_digest">hmac.compare_digest</a> (or Django‚Äôs <a href="https://github.com/django/django/blob/659a73bc0a2df9be856e23fcfc6cc66d0d1a35fd/django/utils/crypto.py#L77"><code class="language-plaintext highlighter-rouge">crypto.constant_time_compare</code></a>).</p>

<h3 id="proactively-looking-for-similar-issues">Proactively looking for similar issues</h3>

<p>You will want to look for all access control code that uses the programming language‚Äôs built-in comparison operators (<code class="language-plaintext highlighter-rouge">==</code> or <code class="language-plaintext highlighter-rouge">!=</code>). I‚Äôm very excited about the potential of platforms like <a href="https://lgtm.com/">LGTM</a> and their <a href="https://securitylab.github.com/tools/codeql">CodeQL language</a> to find vulnerabilities like this automaticaly. Here is a sample query:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">python</span>

<span class="k">from</span> <span class="nx">Compare</span> <span class="nx">eq</span>
<span class="nx">where</span> <span class="nx">eq</span><span class="p">.</span><span class="nx">getAComparator</span><span class="p">().</span><span class="nx">toString</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">matches</span><span class="p">(</span><span class="dl">"</span><span class="s2">%key%</span><span class="dl">"</span><span class="p">)</span> <span class="nx">or</span> <span class="nx">eq</span><span class="p">.</span><span class="nx">getAComparator</span><span class="p">().</span><span class="nx">toString</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">matches</span><span class="p">(</span><span class="dl">"</span><span class="s2">%password%</span><span class="dl">"</span><span class="p">)</span> <span class="nx">or</span> <span class="nx">eq</span><span class="p">.</span><span class="nx">getAComparator</span><span class="p">().</span><span class="nx">toString</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">matches</span><span class="p">(</span><span class="dl">"</span><span class="s2">%auth%</span><span class="dl">"</span><span class="p">)</span> <span class="nx">or</span> <span class="nx">eq</span><span class="p">.</span><span class="nx">getAComparator</span><span class="p">().</span><span class="nx">toString</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">matches</span><span class="p">(</span><span class="dl">"</span><span class="s2">%sign%</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">select</span> <span class="nx">eq</span>
</code></pre></div></div>

<p>This is a relatively naive query, but it helped me identify issues like Wagtail‚Äôs bypass-able <a href="https://github.com/wagtail/wagtail/issues/6127">image serve signature check</a>.</p>

<p>If you want to try this out for yourself, <a href="https://securitylab.github.com/tools/codeql">GitHub‚Äôs Security Labs</a> have the most extensive documentation on how to use this.</p>

<h2 id="references">References</h2>

<ul>
  <li>Tools to probe for timing attack vulnerabilities:
    <ul>
      <li><a href="https://github.com/ffleming/timing_attack">https://github.com/ffleming/timing_attack</a></li>
      <li><a href="https://github.com/SakiiR/timeauth">https://github.com/SakiiR/timeauth</a></li>
    </ul>
  </li>
  <li><a href="https://www.blackhat.com/docs/us-15/materials/us-15-Morgan-Web-Timing-Attacks-Made-Practical.pdf">Timing Attacks Made Practical, Blackhat 2015</a></li>
  <li><a href="https://gist.github.com/thibaudcolas/f68fb257abb6dc6164be0c01c4f42367">Initial research for django-basic-auth-ip-whitelist vulnerability</a>
    <ul>
      <li><a href="https://github.com/tm-kn/django-basic-auth-ip-whitelist/security/advisories/GHSA-m38j-pmg3-v5x5">CVE-2020-4071</a></li>
    </ul>
  </li>
  <li><a href="https://gist.github.com/thibaudcolas/bf80b119225dacb8463aab7d7e527bd6">Initial research for Wagtail vulnerability</a>
    <ul>
      <li><a href="https://github.com/wagtail/wagtail/security/advisories/GHSA-jjjr-3jcw-f8v6">CVE-2020-11037</a></li>
    </ul>
  </li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Accessibility audits: getting started]]></title>
    <link href="https://thib.me/accessibility-audits-getting-started"/>
    <updated>2020-05-01T18:15:08+00:00</updated>
    <id>https://thib.me/accessibility-audits-getting-started</id>
    <content type="html"><![CDATA[<p>Accessibility audits can be daunting to get started with. Here are my recipes to deliver accessibility audits for web projects, combining multiple layers of automation with manual testing to get the best of both worlds.</p>

<!-- more -->

<h2 id="auditing-strategy">Auditing strategy</h2>

<p>First, determine what standard to audit for. <a href="https://www.gov.uk/service-manual/helping-people-to-use-your-service/understanding-wcag">WCAG 2.1 AA</a> is generally a good start, as the standard that underlines many countries‚Äô regulations. Don‚Äôt stop at any given standard though ‚Äì the goal of an audit really is to identify improvements, rather than compliance box ticking.</p>

<p>With this in mind, start with automated tools to find as many issues as possible. Then, we can dedicate more time to more thorough manual testing of specific pages or components.</p>

<p>As a developer, I like the audit to be based on tools that can be used in automated test suites. Continuous integration capabilities are a big plus too, making it much easier for the site to keep being tested consistently after the auditing work is over.</p>

<h2 id="accessibility-audits-for-beginners">Accessibility audits for beginners</h2>

<p>It‚Äôs worth pointing out early ‚Äì while some parts of my approach are very beginner-friendly ‚Äì others rely on years of experience with accessibility guidelines and usability best practices. If you don‚Äôt know where to start, here are the easiest first steps:</p>

<ul>
  <li>If you‚Äôre familiar with command-line tools and want something quick, grab <a href="https://github.com/pa11y/pa11y">Pa11y</a> and point it at pages.</li>
  <li>If you want to analyse a page more thoroughly, use <a href="https://accessibilityinsights.io/">Accessibility Insights</a>.</li>
  <li>If you have money, get <a href="https://www.powermapper.com/products/sortsite/">SortSite</a> or <a href="https://tenon.io/">Tenon</a>. I haven‚Äôt used these myself, those recommendations are only based on the invaluable <a href="https://alphagov.github.io/accessibility-tool-audit/">GDS accessibility tools audit</a>.</li>
</ul>

<p><img src="/images/blog/accessibility-audits-getting-started/accessibility-insights-tab-stops.png" alt="Screenshot of Accessibility Insights tab stops" /></p>

<blockquote>
  <p>Accessibility Insights‚Äô tab stops tool is invaluable to identify strange tab orders, and optimise keyboard navigation</p>
</blockquote>

<h2 id="intermediate-level-auditing">Intermediate-level auditing</h2>

<h3 id="source-code-analysis">Source code analysis</h3>

<p>If possible, this is always a valuable first step. Identifying issues directly in the code will make them much easier to fix, and improves your chances of finding issues that might not be identifiable during manual testing because they rely on a specific state of the app or site.</p>

<p>Linters are very useful here:</p>

<ul>
  <li><a href="https://github.com/yannickcr/eslint-plugin-react">eslint-plugin-react</a>, <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y">eslint-plugin-jsx-a11y</a> for React, which has the most advanced static analysis tools of any front-end stack.</li>
  <li><a href="https://github.com/thibaudcolas/curlylint">curlylint</a> for HTML templates, my (experimental! üí•) attempt at bridging that gap.</li>
</ul>

<p>I also audit code manually, by searching the project‚Äôs source. Here are common patterns I search for:</p>

<ul>
  <li>Usage of the <code class="language-plaintext highlighter-rouge">role</code> attribute. It‚Äôs very easy to misuse ‚Äì roles that don‚Äôt exist, that need specific parents or children, that are redundant with the element‚Äôs intrinsic role. Roles that have no practical impact without further ARIA attributes (most commonly labels, or state).</li>
  <li>Usage of ARIA attributes. They are also <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#no_aria_better_bad_aria">easy to misuse</a>.</li>
  <li>Tables markup. Tables need a caption, and headers that define their scope.</li>
  <li>Button markup. Misusing anchor tags for buttons.</li>
  <li>Forms markup. Making sure they use the correct native controls, with sensible attributes.</li>
  <li>Tabs, menus, dropdowns, toggles. It‚Äôs quick to check whether they have any kind of keyboard navigation implemented, and whether they have the correct ARIA attributes set for any given state.</li>
</ul>

<h3 id="bulk-page-checks">Bulk page checks</h3>

<p>After looking at the source, the next step is to look at pages in ‚Äúbulk‚Äù mode ‚Äì running automated tools that scan as much of the site as possible. My preference is for:</p>

<ul>
  <li>The <a href="https://validator.github.io/validator/">V.Nu HTML5 validator</a>. Either the Docker image, or the pre-compiled CLI binaries, <code class="language-plaintext highlighter-rouge">vnu &lt;url&gt;</code>. Generally I will either do this for the whole sitemap, or a subset of URLs.</li>
  <li><a href="https://github.com/pa11y/pa11y-ci">pa11y-ci</a>, or Pa11y directly, for the whole sitemap or a subset of URLs if there is a need for further automation. <code class="language-plaintext highlighter-rouge">pa11y-ci --config &lt;my config&gt; --sitemap &lt;project sitemap&gt; --json &gt; sitemap-report.json</code>.</li>
</ul>

<p>Pa11y is worth a special mention here. Pa11y is a wrapper of <a href="https://github.com/dequelabs/axe-core">Axe</a> and <a href="https://github.com/squizlabs/HTML_CodeSniffer">HTML_CodeSniffer</a>, which do the actual accessibility checks. It allows those tools to be run in bulk mode, over many pages, or at different states of a page by interacting with it automatically.</p>

<p><img src="/images/blog/accessibility-audits-getting-started/pa11y-ci-sitemap-mode.png" alt="Screenshot of pa11y-ci output in sitemap mode" /></p>

<blockquote>
  <p>Testing hundreds of a pages in a one-liner ‚Äì thanks pa11y-ci!</p>
</blockquote>

<p>Here is a basic configuration file, summarising how I tend to use it:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">urls</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">label</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Homepage</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://www.example.com/</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">];</span>

<span class="kd">const</span> <span class="nx">basicAuth</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">username:password</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">defaults</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">Authorization</span><span class="p">:</span> <span class="s2">`Basic </span><span class="p">${</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">basicAuth</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="dl">"</span><span class="s2">base64</span><span class="dl">"</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">standard</span><span class="p">:</span> <span class="dl">"</span><span class="s2">WCAG2AAA</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">runners</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">axe</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">htmlcs</span><span class="dl">"</span><span class="p">],</span>
  <span class="p">},</span>

  <span class="na">urls</span><span class="p">:</span> <span class="nx">urls</span><span class="p">.</span><span class="nx">map</span><span class="p">(({</span> <span class="nx">url</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">url</span><span class="p">),</span>
<span class="p">};</span>
</code></pre></div></div>

<blockquote>
  <p>üöß Head over to <a href="https://github.com/thibaudcolas/wagtail-tooling">wagtail-tooling</a> for a more advanced example of using Pa11y on a large-scale project.</p>
</blockquote>

<h3 id="single-page-checks">Single-page checks</h3>

<p>Now let‚Äôs look at intermediate techniques to apply per page. Depending on the site‚Äôs size, number of different page types, and budget for the audit, I would generally apply those checks on a sample of between five to ten page types. First,</p>

<ul>
  <li><a href="https://github.com/pa11y/pa11y">Pa11y</a>, if not already used in CI mode. Make sure it runs both HTML_CodeSniffer and Axe.</li>
  <li>The <a href="https://accessibilityinsights.io/">Accessibility Insights</a> extension from Microsoft, with its FastPass mode, which also uses Axe under the hood.</li>
</ul>

<p>Then in the browser, there are a lot of semi-automated tests worth doing:</p>

<ul>
  <li>With Accessibility Insights ‚Äì use the colour, heading, landmark tools to quickly visualise the page structure and spot issues.</li>
  <li>With a screen reader‚Äôs navigation (e.g. <a href="https://accessibility.psu.edu/screenreaders/voiceover/">VoiceOver Rotor</a>), inspect all of the page‚Äôs landmarks, headings, images, tables, frames, form elements, links and buttons.</li>
</ul>

<p>Only about <a href="https://alphagov.github.io/accessibility-tool-audit/">30 to 40%</a> of accessibility issues can be found with fully automated tools, so these semi-automated checks are a great way to go beyond that, without having to spend hours manually navigating pages.</p>

<p><img src="/images/blog/accessibility-audits-getting-started/voiceover-rotor-safari.png" alt="Screenshot of the VoiceOver Rotor, in Safari, show a list of landmarks for a site‚Äôs homepage. Some landmarks have custom labels." /></p>

<blockquote>
  <p>The VoiceOver rotor is a very convenient way to get started with screen reader testing for beginners.</p>
</blockquote>

<h3 id="manual-testing-for-high-value-pages">Manual testing for high-value pages</h3>

<p>Manual tests are the most time-consuming and require the most expertise. We want to navigate the site site in the same way a user of assistive technology would, focusing on parts of the experience that automated tests cannot assess. I generally advise to try the following:</p>

<h4 id="zoom-level">Zoom level</h4>

<ul>
  <li>Is the whole page usable with 200% to 400% page-level zoom?</li>
  <li>Does the site support browsers‚Äô font resizing features?</li>
  <li>Are there any issues when using an on-screen magnifier?</li>
  <li>Are there areas of the site that require bidirectional scrolling because of the zoom level?</li>
</ul>

<h4 id="colour">Colour</h4>

<ul>
  <li>Are there any non-text UI elements for which the contrast is too low?</li>
  <li>Any :focus or other active states that are reliant on colour alone, or too low contrast?</li>
</ul>

<h4 id="keyboard-navigation">Keyboard navigation</h4>

<ul>
  <li>Can the whole page be used with a keyboard only?</li>
  <li>Are there <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/keyboard-operation-trapping.html">keyboard traps</a>?</li>
  <li>Are there parts of the page where focus should be trapped but isn‚Äôt?</li>
  <li>Are the tab stops logical?</li>
</ul>

<h4 id="screen-reader-navigation">Screen reader navigation</h4>

<ul>
  <li>Can the whole page be navigated with a screen reader?</li>
  <li>Are there relevant things on the page that aren‚Äôt being announced?</li>
  <li>Or things that shouldn‚Äôt be announced? E.g. decorative images, or repetitive text.</li>
</ul>

<h4 id="pointer-touch-and-click-navigation">Pointer (touch and click) navigation</h4>

<ul>
  <li>Are pointer targets big enough, and not too close to one another?</li>
  <li>Are there areas of the page that are hard to scroll (especially on mobile)?</li>
  <li>Are there areas on the page that require horizontal scrolling (especially on mobile)?</li>
</ul>

<p><strong>This barely scratches the surface</strong>, especially when it comes to screen reader usage. Test with <a href="https://docs.wagtail.io/en/stable/contributing/developing.html#accessibility-targets">multiple screen readers</a> if possible ‚Äì my go-tos being VoiceOver with Safari on macOS &amp; iOS, and NVDA with Firefox on Windows.</p>

<h2 id="expert-level-accessibility-compliance-testing">Expert-level accessibility compliance testing</h2>

<p>All of the above is great in order to make a website accessible, but to assess compliance with standards, you need to know the actual standards, and test for each of the compliance criteria. For WCAG 2.1, I recommend to:</p>

<ul>
  <li>Know all of the WCAG2.1 A, AA, AAA success criteria ‚Äì refer to the <a href="https://alphagov.github.io/wcag-primer/all.html#common-mistakes">GOV.UK WCAG 2.1 Primer</a> for a ‚Äúcheatsheet‚Äù version.</li>
  <li>For each commonly-used component, know which success criteria are relevant ‚Äì refer to the official <a href="https://www.w3.org/WAI/WCAG21/quickref/">WCAG2.1 quick reference</a>.</li>
  <li>Know about established <a href="https://www.w3.org/TR/wai-aria-practices-1.1/">ARIA practices</a>, and their respective browser support</li>
</ul>

<p>Once you‚Äôre ready, dive through Accessibility Insights‚Äô <a href="https://accessibilityinsights.io/docs/en/web/getstarted/assessment">Assessment tool</a>, which is by far the most advanced freely available accessibility compliance testing tool there is.</p>

<h2 id="beyond-audits">Beyond audits</h2>

<p>Congratulations, you‚Äôre now equipped to audit websites! Make the most of those skills to identify improvements on the sites you build and use ‚Äì but keep in mind that no single audit can deliver ongoing, sustainable accessibility.</p>

<p>Going beyond audits, it‚Äôs worth investing into training to create accessible experiences as a default. Also look into opportunities to have accessibility be part of your normal process ‚Äì whether that‚Äôs by having <a href="https://github.com/storybookjs/storybook/tree/master/addons/a11y">tests in your UI library</a> as a developer, or <a href="https://github.com/neon-jungle/wagtail-accessibility">accessibility features in the CMS</a> as an editor. More on that in a future post!</p>

<hr />

<p>Thank you to Jane, Paul, Tom, and Steven for their help with this post.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Conventions to organize React projects]]></title>
    <link href="https://thib.me/conventions-to-organize-react-projects"/>
    <updated>2020-04-20T22:03:29+00:00</updated>
    <id>https://thib.me/conventions-to-organize-react-projects</id>
    <content type="html"><![CDATA[<p>I‚Äôve spent a lot of time thinking of how best to structure React projects over the last few years. This is especially important when React is a central part of the project‚Äôs front-end tech stack, as React in itself has very few opinions about how to organize code (it‚Äôs a library, not a framework). Here are my notes.</p>

<!-- more -->

<h2 id="inspiration">Inspiration</h2>

<p>My favourite file structure is that of <a href="https://www.djangoproject.com/">Django</a>. In particular,</p>

<ul>
  <li>At the top level, dividing code by functional area</li>
  <li>Within each functional area, the files‚Äô names follow an established convention based on non-functional considerations.</li>
  <li>If needed, code can then be broken up by functional area for each type of file</li>
</ul>

<p>What I really like about those conventions is that they give the code as much room to grow as possible¬†‚Äì add more apps as the project grows, remove whole apps if they‚Äôre no longer needed, and sub-divide individual apps if they start getting too big.</p>

<p>Here is what this looks like in practice:</p>

<pre><code class="language-txt">demo
‚îú‚îÄ‚îÄ feedback
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ templates
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ urls.py
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ polls
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ admin.py
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ migrations
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ models
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ questions.py
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ choices.py
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ templates
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ polls
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ question_list.html
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ results.html
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ urls.py
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ settings.py
‚îî‚îÄ‚îÄ urls.py
</code></pre>

<ol>
  <li><code class="language-plaintext highlighter-rouge">polls</code> is a functional area</li>
  <li>Within this, <code class="language-plaintext highlighter-rouge">urls.py</code> does all routing-level logic for <code class="language-plaintext highlighter-rouge">polls</code></li>
  <li>If needed, that non-functional can be broken up into further features-oriented files like with <code class="language-plaintext highlighter-rouge">models</code>, which has separate files.</li>
</ol>

<h2 id="the-overarching-rules">The overarching rules</h2>

<p>From that Django baseline, here are rules I like to follow when adapting this to arbitrary technologies.</p>

<h3 id="folder-structure">Folder structure</h3>

<ul>
  <li>Co-locate code by feature rather than file type as much as possible.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Button.js</code>, <code class="language-plaintext highlighter-rouge">Button.css</code>, <code class="language-plaintext highlighter-rouge">Button.test.js</code>, and <code class="language-plaintext highlighter-rouge">Button.md</code> should all live side-by-side.</li>
      <li>User profile logic, avatar &amp; bio UI components, profile details update forms ‚Äì should all be close one-another if possible.</li>
    </ul>
  </li>
  <li>Avoid files that are just importing and re-exporting code.
    <ul>
      <li>These are useful for libraries that need a clean API, and an overhead for our first-party project code.</li>
      <li>Modern IDEs support automatically updating file paths as files move, and auto-completing imports.</li>
    </ul>
  </li>
  <li>Extract code that is not feature-specific into a reusable ‚Äúshared‚Äù folder.</li>
  <li>Consider having another ‚Äúmodules‚Äù folder for code that is so un-specific to your project that it could just as well come from a dependency.</li>
</ul>

<h3 id="naming-conventions">Naming conventions</h3>

<ul>
  <li>Files should be named after their default export as much as possible.
    <ul>
      <li>The <code class="language-plaintext highlighter-rouge">Button</code> component lives in <code class="language-plaintext highlighter-rouge">Button.js</code>.</li>
    </ul>
  </li>
  <li>For ancilliary files, take the name of the main file and suffix it with the ‚Äútype‚Äù.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Button.test.js</code>, <code class="language-plaintext highlighter-rouge">Button.stories.js</code>, <code class="language-plaintext highlighter-rouge">Button.scss</code></li>
      <li>Files that represent non-functional considerations can be named after the ‚Äúapp‚Äù they are in, for example <code class="language-plaintext highlighter-rouge">polls.models.js</code></li>
    </ul>
  </li>
  <li>Each file name must be unique for the whole project, and convey what the file contains without context.
    <ul>
      <li>Don‚Äôt <code class="language-plaintext highlighter-rouge">models.js</code>. Do <code class="language-plaintext highlighter-rouge">polls.models.js</code>. Don‚Äôt <code class="language-plaintext highlighter-rouge">urls.js</code>. Do <code class="language-plaintext highlighter-rouge">polls.urls.js</code>.</li>
      <li>I always use text search and filters to navigate through code, this makes it much easier.</li>
    </ul>
  </li>
</ul>

<h3 id="import">Import</h3>

<ul>
  <li>Always import by relative file path.
    <ul>
      <li>Those imports are compatible with the most tools ‚Äì IDEs, linters, SCMs</li>
      <li>They can be automatically generated by IDEs.</li>
      <li>They are very short when code is co-located with its immediate dependencies, which is the most common type of import.</li>
    </ul>
  </li>
</ul>

<h3 id="react-specificites">React specificites</h3>

<ul>
  <li>Components should be in their <code class="language-plaintext highlighter-rouge">components</code> folder for each app</li>
  <li>If your tools allow it, always start by co-locating the component‚Äôs code, documentation, styles, data dependencies, all in the same file.
    <ul>
      <li>Break it down into separate co-located files if it gets too big.</li>
    </ul>
  </li>
  <li>Components should have their own folder if the component is made up of more than one file (<code class="language-plaintext highlighter-rouge">Button.js</code>, <code class="language-plaintext highlighter-rouge">Button.test.js</code>)</li>
  <li>If React is your main UI building block, consider having a separate <code class="language-plaintext highlighter-rouge">pages</code> folder for page-level components, if the <code class="language-plaintext highlighter-rouge">components</code> folder gets too big.</li>
</ul>

<h3 id="redux-specificities">Redux specificities</h3>

<ul>
  <li>Follow the Ducks methodology, ideally using <a href="https://redux-starter-kit.js.org/">Redux Toolkit</a>.</li>
  <li>Co-locate <code class="language-plaintext highlighter-rouge">connect</code> code in the component‚Äôs source. No one wants to jump back and forth between ‚Äúcontainer‚Äù and ‚Äúdumb‚Äù components.</li>
</ul>

<h2 id="in-practice">In practice</h2>

<p>Here is a bigger React project structured with this methodology:</p>

<pre><code class="language-txt">.
‚îú‚îÄ‚îÄ admin.entry.js
‚îú‚îÄ‚îÄ client.entry.js
‚îú‚îÄ‚îÄ counsellor.entry.js
‚îú‚îÄ‚îÄ booking
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ booking.actions.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ booking.constants.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ booking.models.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ booking.models.test.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ booking.reducer.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ booking.routes.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ booking.types.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AvailabilityPicker
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AvailabilityPicker.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AvailabilityPicker.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AvailabilityPicker.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CalendarButton
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CalendarButton.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ CalendarButton.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorSlots.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ LoadingOverlay.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ LoadingOverlay.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SlotOverlay.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SlotOverlay.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SlotPicker.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ SlotPicker.scss
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingContent
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingContent.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ BookingContent.test.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingFlow.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ChooseAvailability.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ConfirmBooking
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ConfirmBooking.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ConfirmBooking.scss
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorBioModal
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorBioModal.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorBioModal.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ CounsellorBioModal.stories.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ProgressBar
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ProgressBar.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ProgressBar.scss
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Register
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ProvisionalBookingCard.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Register.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Register.scss
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ RegisterPersonal.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ RegisterPersonal.test.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ RegisterSituation.js
‚îú‚îÄ‚îÄ counsellors
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientDetail.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientHistory
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientHistory.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientHistory.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientHistory.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ClientHistoryCard
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientHistoryCard.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ClientHistoryCard.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorDashboard.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timeline
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timeline.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timeline.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timeline.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Timeline.test.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ TimelineCard
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TimelineCard.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TimelineCard.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TimelineCard.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TimelineCard.test.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ **snapshots**
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ TimelineCard.test.js.snap
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ counsellors.actions.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ counsellors.api.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ counsellors.reducer.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ counsellors.routes.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ counsellors.types.js
‚îú‚îÄ‚îÄ dashboard
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingLanding
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingLanding.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ BookingLanding.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CancelBooking
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CancelBooking.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CancelBooking.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CancelBookingSuccess.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ CancelForm.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ChangeBooking
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ChangeBooking.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ChangeBooking.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ChangeBookingConfirm.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Dashboard.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ DonationRequest
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ DonationRequest.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ DonationRequest.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ EndOfSessions
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ EndOfSessions.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ EndOfSessions.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NonVerifiedUserMessage
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NonVerifiedUserMessage.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ NonVerifiedUserMessage.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ViewBookings
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ViewBookings.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ViewBookings.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ViewBookings.test.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dashboard.actions.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dashboard.api.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dashboard.constants.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dashboard.reducer.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ dashboard.routes.js
‚îú‚îÄ‚îÄ main.scss
‚îú‚îÄ‚îÄ shared
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ api
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ timekit.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ video.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AppError
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ AppError.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingCard
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingCard.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingCard.mixins.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingCard.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ BookingCard.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ DNACard
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ DNACard.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ DNACard.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Button
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Button.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Button.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientApp.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ContentCard
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ContentCard.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ContentCard.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ContentCard.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorApp.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ DashboardWrapper.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ DatePicker
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ DatePicker.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ DatePicker.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ DatePicker.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ErrorModal
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ErrorModal.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ErrorModal.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ErrorModal.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ FormField
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ FormField.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ FormField.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ RadioGroup.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ StyledErrorMessage.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Icon
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Icon.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Icon.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Icon.test.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ InfoBox
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ InfoBox.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ InfoBox.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ InfoBox.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ LoadingIndicator
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ LoadingIndicator.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ LoadingIndicator.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ LoadingIndicator.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ MainWrapper.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Modal
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Modal.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Modal.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Modal.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NoBookings
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NoBookings.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NoBookings.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ NoBookings.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NotFound.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ScrollToTop.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SentryBoundary
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SentryBoundary.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ShowBetween
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ShowBetween.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ShowBetween.test.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ mobile-menu.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ mobile-sub-menu.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ read-more.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fonts
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ IF_Std_Bold.ttf
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ IF_Std_Bold.woff2
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ IF_Std_Light.ttf
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ IF_Std_Light.woff2
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ IF_Std_Regular.ttf
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ IF_Std_Regular.woff2
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ images
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ backdrop-bluecard.svg
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ backdrop-shape.svg
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ bottom-right-white-brand-blob.svg
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ cancellation.png
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ change.png
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ checkmark.svg
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ chevron-right.svg
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ confirmation.png
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ email-logo.png
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fr-logo.png
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ reminder.png
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ verification.png
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ sass
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ abstracts
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _functions.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _mixins.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _variables.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ base
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _base.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _fonts.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _typography.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _blockquote.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _call-to-action.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _card.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _client-detail.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _cookie-message.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _grid.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _icon.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _menu-dropdown.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _nav.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _read-more.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _responsive-object.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _rich-text.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _section.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _select-menu.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _user-modal.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _wrapper.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ button
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _button-action.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _button-rounded.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _button-slot.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _button.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ case-load
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _case-load-header.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _case-load-table.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _case-load.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ form
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _form-checkbox.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _form-item.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _form-radio.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _form.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ layout
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _footer.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _header.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _sidebar.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ utilities
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _utilities.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ vendor
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ _normalize.scss
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ utils
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ actions.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dates.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dates.test.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ delay.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ delay.test.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ errors.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ hooks.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ notifications.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ phonenumbers.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ phonenumbers.test.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ storage.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ storage.test.js
‚îú‚îÄ‚îÄ store.js
‚îú‚îÄ‚îÄ stories
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TemplatePattern.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ addons.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ config.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ middleware.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ mocks
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ bookings.mock.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ counsellor-sample-image.jpeg
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ counsellors.mock.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ sample-video.mp4
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ users.mock.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ storyshots.test.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ webpack.config.js
‚îú‚îÄ‚îÄ tests
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ assetMock.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ environment.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ setupTests.js
‚îú‚îÄ‚îÄ user
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ UserNav.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ user.actions.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ user.api.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ user.constants.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ user.reducer.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ user.types.js
‚îî‚îÄ‚îÄ video
‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AppointmentDetails
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AppointmentDetails.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AppointmentDetails.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ AppointmentDetails.stories.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ PreviewPlayer
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ PreviewFeed.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ PreviewPlayer.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ PreviewPlayer.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ PreviewPlayer.stories.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SessionStatusForm
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SessionStatusForm.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ SessionStatusForm.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ SessionStatusForm.stories.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timer
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timer.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timer.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Timer.stories.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Timer.test.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TwilioVideoPlayer.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Video.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ VideoOverlay
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ VideoOverlay.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ VideoOverlay.scss
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ VideoPlayer
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ VideoPlayer.js
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ VideoPlayer.scss
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ VideoPlayer.stories.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ VideoRoom
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientVideoRoom.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ClientVideoRoom.stories.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ConfirmEndCall.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ConfirmEndCall.scss
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorVideoRoom.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CounsellorVideoRoom.stories.js
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ VideoRoom.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ VideoRoom.scss
‚îú‚îÄ‚îÄ video.actions.js
‚îú‚îÄ‚îÄ video.constants.js
‚îú‚îÄ‚îÄ video.reducer.js
‚îî‚îÄ‚îÄ video.routes.js

70 directories, 258 files
</code></pre>

<p>Smaller Create React App + Redux Toolkit project:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src/
‚îú‚îÄ‚îÄ main.entry.tsx
‚îú‚îÄ‚îÄ main.entry.scss
‚îú‚îÄ‚îÄ nav
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NavBar
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Logo.svg
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ NavBar.stories.tsx
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ NavBar.tsx
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ PrimaryNav
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ PrimaryCategory.tsx
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ PrimaryNav.stories.tsx
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ PrimaryNav.test.tsx
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ PrimaryNav.tsx
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ nav.data.ts
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ nav.slice.ts
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ nav.types.ts
‚îú‚îÄ‚îÄ shared
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ components
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ App
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ App.test.tsx
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ App.tsx
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Dashboard.tsx
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Button
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Button.stories.tsx
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Button.tsx
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Release
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ Release.module.scss
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ Release.test.tsx
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ Release.tsx
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ shared.constants.ts
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ store.ts
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ styles
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ theme.ts
‚îî‚îÄ‚îÄ user
    ‚îú‚îÄ‚îÄ components
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ AccountInfo
    ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ AccountInfo.stories.tsx
    ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ AccountInfo.test.tsx
    ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ AccountInfo.tsx
    ‚îú‚îÄ‚îÄ user.data.ts
    ‚îú‚îÄ‚îÄ user.slice.ts
    ‚îî‚îÄ‚îÄ user.types.ts
</code></pre></div></div>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://blog.danawoodman.com/articles/organizing-react-projects">How I Organize React Projects</a></li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[React training goals for front-end developers]]></title>
    <link href="https://thib.me/react-training-goals-for-front-end-developers"/>
    <updated>2020-04-17T18:21:48+00:00</updated>
    <id>https://thib.me/react-training-goals-for-front-end-developers</id>
    <content type="html"><![CDATA[<p>Here are my thoughts on what front-end developers should focus on when learning React. There are a lot of resources on there ‚Äì¬†this is more about identifying what exactly you should spend time on, and in what order, for people who are already well versed in building UIs with HTML, CSS, and a sprinkle of JavaScript.</p>

<!-- more -->

<h2 id="1-ui-development-fundamentals">#1 UI development fundamentals</h2>

<h3 id="javascript-fundamentals">JavaScript fundamentals</h3>

<p>No matter what you do with React, you‚Äôll be more productive if you know your way around ES6, functional programming, DOM APIs.</p>

<p>To do this in any kind of professional environment you also need to know about supporting tooling, which is central to modern JS development ‚Äì Node and npm, unit tests in JS (with Jest), Babel, Webpack. Prettier. ESLint.</p>

<p>TypeScript is a plus on all of the above, and is gradually becoming the de-facto standard for non-trivial codebases, but for now I wouldn‚Äôt call it a ‚Äúfundamental‚Äù.</p>

<p>There are a lot of resources to learn all of the above. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">MDN has a good overview of modern JavaScript</a>. I would highly recommend taking a course on <strong>functional programming with JS</strong>, since this is an area where it‚Äôs important to understand the theory. I would also recommend reading through <a href="https://github.com/airbnb/javascript">Airbnb‚Äôs JS styleguide</a>, and the corresponding ESLint config. It‚Äôs very long, but reading it all and understanding it all is the best way to test the depths of your knowledge. I wouldn‚Äôt worry too much about learning tooling beyond hands-on experience on projects ‚Äì these days, for React in particular, Create React App does most of this for you.</p>

<h3 id="front-end-development">Front-end development</h3>

<p>I‚Äôm not entirely sure this needs to be stated but React is mainly used for UI development, so to be proficient you need a good understanding of browsers and front-end web technologies like HTML / CSS / SVG, as well as UI dev considerations like reusable layouts vs one-off components, accessibility, performance, etc.</p>

<p>I don‚Äôt think this is too important for me to develop further so will stop there. One thing to note is that quite a lot of advanced React development is done with a CSS-in-JS approach as opposed to a more traditional ‚ÄúCSS preprocessor‚Äù ‚Äì but I think you can go quite far without knowing anything about this.</p>

<h3 id="react-apis-and-common-third-party-libraries">React APIs and common third-party libraries</h3>

<p>Building upon the fundamentals, you of course need to know a fair bit about React itself to be proficient with it. To me, knowing React as a front-end developer starts with understanding its component-driven paradigm, JSX, props, state, (basic) hooks, and the component lifecycle. How to do forms with React. Knowing things like PropTypes also helps, as well as usage of popular libraries from the React ecosystem like classnames, react-modal, formik.</p>

<p>It‚Äôs also important to know about tooling for all of this ‚Äì ESLint rules for React, and unit tests for React components. Storybook and similar tools are also much more prevalent these days.</p>

<p>There are a lot of courses on this, which generally also cover more advanced topics.</p>

<h2 id="2-single-page-app-builds">#2 Single-page-app builds</h2>

<p>All of the above should cover enough bases to be proficient building UI components with React. Now there‚Äôs quite a big gap from UI components development, to creating the architecture of a whole app / site around React. ‚ÄúReact‚Äù is quite a small library, but generally when we talk about a‚ÄùReact build‚Äù we also encompass a lot of other aspects of client-side app development that don‚Äôt have that much to do with React itself.</p>

<h3 id="api-integrations">API integrations</h3>

<p>Generally we use React for UIs that are (much) more dynamic than a CMS-driven web page, where React‚Äôs client-rendered nature excels. However, in order to display any UI at all ‚Äì we need to load the correct data for the app. Generally for us this means integrating with a REST(ish) API over JSON, served by a Django back-end. To be proficient here one needs to have a fair amount of knowledge about APIs, serialisation, HTTP, network constraints, error handling. Practical knowledge of the corresponding browser DevTools is also a must, and related development tools (curl, Swagger, Postman) helps a lot too. This work is generally about integrating with a Django back-end, and the skills needed here were historically used most for back-end development on the web / general programming (e.g. scripting) outside of web development. So some basic back-end development skill, or programming skills outside of the browser, will help a lot.</p>

<p>This isn‚Äôt really specific to React but generally falls within the ‚ÄúReact development‚Äù umbrella nonetheless. Learning this would generally be covered in any full-stack React dev course. For example a MEAN stack tutorial, or <a href="https://github.com/gothinkster/realworld">RealWorld App</a>.</p>

<h3 id="data-management">Data management</h3>

<p>Dynamic UIs generally have a lot of data to manipulate, whether that‚Äôs app state from interactions, or data that was loaded. Here some knowledge of data manipulation is important ‚Äì functional programming, algorithmic complexity, normalisation. Back-end skills also help a lot since generally this work would have happened server-side for more traditional web apps. In our React stack, data management is done with Redux so any knowledge of it (or Flux, its predecessor) also helps a lot. As well as knowledge of React‚Äôs Context API.</p>

<p>Out of all skills that tend to fall under the ‚ÄúReact‚Äù umbrella these are probably the ones that are hardest to train. Things like <a href="https://redux-starter-kit.js.org/">Redux Toolkit</a> help a lot, which provide more framework-like opinions. There are a lot of good resources for Redux (for example the official <a href="https://redux.js.org/style-guide/style-guide">Redux styleguide</a>).</p>

<h3 id="single-page-app-considerations">Single-page app considerations</h3>

<p>Beyond data management, architecting a React app generally also requires knowledge of ‚Äúsingle-page apps‚Äù (PWAs). This roughly means being aware of the corresponding DOM / browser APIs:</p>

<ul>
  <li>Client-side routing with HTML5 history and the React-specific routing libraries (react-router, Reach router)</li>
  <li>Data storage with HTML5 storage backends (localstorage, indexeddb, etc)</li>
  <li>(Service workers ‚Äì although that feels quite advanced)</li>
</ul>

<p>This isn‚Äôt relevant on all projects but generally falls within the React sphere where appropriate. There are good learning resources for this in the React world.</p>

<h2 id="3-other-advanced-topics">#3 Other advanced topics</h2>

<p>There are a few other topics that are worth mentioning but I would not classify as fundamentals. In no particular order,</p>

<ul>
  <li>TypeScript. Knowledge about type systems in general also helps.</li>
  <li>CSS-in-JS. Particularly styled-components.</li>
  <li>Server-side rendering.</li>
  <li>Animations with React. I would like this to not be an advanced topic, but realistically it is.</li>
  <li>Integration with other libraries, e.g. D3</li>
  <li>The Context API</li>
  <li>Advanced React hooks / custom hooks</li>
  <li>Error monitoring for client-side code. With Sentry for example.</li>
  <li>GraphQL. Most likely with Gatsby for us. Otherwise Apollo.</li>
  <li>‚ÄúMeta-frameworks‚Äù like Next / Gatsby</li>
  <li>Code splitting</li>
  <li>ES6 modules</li>
  <li>Third-party components selection</li>
  <li>(React Native)</li>
  <li>Publishing React components for reuse on npm</li>
  <li>Design systems with React</li>
  <li>Enzyme and snapshot tests for unit tests for React components</li>
  <li>Async/await</li>
  <li>Authentication and security-related concepts ‚Äì CORS, SSO, CSRF, JWTs, same-origin policies, CSP</li>
  <li>React performance ‚Äì virtual DOM, memoization</li>
  <li>Error boundaries</li>
  <li>Higher-order components</li>
  <li>React Suspense</li>
  <li>React‚Äôs Strict mode</li>
</ul>

<p>Last but not least ‚Äì React app architecture is worth a line item in here, although I wouldn‚Äôt know where to put it. For React apps this means things like:</p>

<ul>
  <li>Deciding where and how to do API integrations, and related auxiliary data management ‚Äì error handling, loading states</li>
  <li>Making components that are reusable, since that‚Äôs React‚Äôs strength</li>
  <li>Using a code structure that works ‚Äì ‚Äúapp‚Äù folders like Django or file type folders, with what naming conventions</li>
  <li>Deciding how to do code splitting ‚Äì app level, route level, component level</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Upgrading to a stricter ESLint config]]></title>
    <link href="https://thib.me/upgrading-to-stricter-eslint-config"/>
    <updated>2020-01-13T00:18:03+00:00</updated>
    <id>https://thib.me/upgrading-to-stricter-eslint-config</id>
    <content type="html"><![CDATA[<p>Updating a codebase from one <a href="https://eslint.org/">ESLint</a> config to another can be daunting, especially if switching to something more strict. This post proposes a methodology to do those config overhauls step by step, and get the benefits of a new config without putting in all of the effort upfront.</p>

<!-- more -->

<p>As an example of such a switch, consider moving from <a href="https://www.npmjs.com/package/eslint-config-react-app">Create React App‚Äôs ESLint config</a> to something more opinionated like <a href="https://github.com/airbnb/javascript">airbnb/javascript</a>, my own <a href="https://github.com/thibaudcolas/eslint-plugin-cookbook">eslint-plugin-cookbook</a>, or Torchbox‚Äôs <a href="https://github.com/torchbox/eslint-config-torchbox">eslint-config-torchbox</a>.</p>

<h2 id="retrofitting-strict-rules-on-existing-projects">Retrofitting strict rules on existing projects</h2>

<p>First, let‚Äôs remove the project‚Äôs existing ESLint-related dependencies (inspect the <code class="language-plaintext highlighter-rouge">package.json</code> to determine what they are for your project), and upgrade ESLint to the latest version.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm uninstall <span class="nt">--save-dev</span> eslint-config-prettier eslint-plugin-react
npm <span class="nb">install</span> <span class="nt">--save-dev</span> eslint@latest
</code></pre></div></div>

<p>Then, install the config as described in its documentation and replace the project‚Äôs config file with one that just extends the installed config. Once you‚Äôre done, now is a good time to commit the work so far. Here is what this would look like with <a href="https://github.com/torchbox/eslint-config-torchbox">eslint-config-torchbox</a>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx install-peerdeps <span class="nt">--dev</span> eslint-config-torchbox@latest
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// See https://github.com/torchbox/eslint-config-torchbox for rules.</span>
  <span class="na">extends</span><span class="p">:</span> <span class="dl">"</span><span class="s2">torchbox</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>In all likelihood, this configuration is more opinionated / checks more aspects of the code than what the project was using before, and ESLint now reports a lot of errors. This is good! It means that the project will benefit from having a newer, stricter config in place, and as a developer you get to learn about more JavaScript anti-patterns.</p>

<p>For ESLint and the new config to be useful, we need them to be put to use as soon as possible, and to fail CI builds whenever issues are reported ‚Äì it‚Äôs not good to work on a project where ESLint reports countless issues. So, our goal is to get to 0 errors and warnings reported by ESLint.</p>

<h2 id="initial-cleanup">Initial cleanup</h2>

<h3 id="autofix">Autofix</h3>

<p>Let‚Äôs start by doing what ESLint suggests in its output ‚Äì¬†using its auto-fixing capabilities!</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># At the root of the project to automatically apply ESLint‚Äôs fixes:</span>
npx eslint <span class="nb">.</span> <span class="nt">--fix</span>
<span class="c"># If your project uses Prettier, also run it afterwards,</span>
<span class="c"># to guarantee that ESLint‚Äôs changes still match your formatting.</span>
npm run format
<span class="c"># Or if your project has Prettier set up differently,</span>
npx prettier <span class="nt">--write</span> <span class="s1">'&lt;where your JS files are&gt;/**/*.js'</span>
<span class="c"># Or if you want to reformat **all** of your project‚Äôs JS files.</span>
npx prettier <span class="nt">--write</span> <span class="s1">'**/?(.)*.{js,ts,jsx,tsx}'</span>
</code></pre></div></div>

<p>Autofixes are aware of the syntax, and generally can be considered highly reliable ‚Äì review the changes, <strong>commit them</strong>, and let‚Äôs move on to the next phase.</p>

<h4 id="disable-problematic-rules">Disable problematic rules</h4>

<p>Now, let‚Äôs look at the remaining problems, and extract a list of the rules they relate to, using some command-line magic:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npx eslint <span class="nb">.</span> <span class="nt">--format</span> tap | <span class="nb">grep </span>ruleId | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">':'</span> <span class="nt">-f</span> 2 | <span class="nb">cut</span> <span class="nt">-c</span> 2- | <span class="nb">sort</span> | <span class="nb">uniq
</span>class-methods-use-this
consistent-return
<span class="o">[</span>...]
react/prop-types
</code></pre></div></div>

<p>Let‚Äôs add this list to our <code class="language-plaintext highlighter-rouge">.eslintrc.js</code> config, disabling all of the rules that were reporting problems:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">legacyCode</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">class-methods-use-this</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">consistent-return</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="c1">// [...]</span>
  <span class="dl">"</span><span class="s2">react/prop-types</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// See https://github.com/torchbox/eslint-config-torchbox for rules.</span>
  <span class="na">extends</span><span class="p">:</span> <span class="dl">"</span><span class="s2">torchbox</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">legacyCode</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Note how we put the rules in a ‚ÄúlegacyCode‚Äù bucket, so we can clearly distinguish between rules we choose to configure differently from this project, and the ones that are enforced by the new config but we‚Äôre not ready to turn on yet.</p>

<p>Running ESLint again, there shouldn‚Äôt be any errors reported üéâ.</p>

<h3 id="calling-it-a-day">Calling it a day</h3>

<p><strong>Now is a good time to commit ‚Äì and potentially stop there</strong>. We‚Äôve upgraded the config, disabled all of the rules and got our linting back to 0 problems reported. üåà We might not be leveraging all of the checks that the new config comes with, but we don‚Äôt necessarily need to do this right away. And your project can already benefit from the work done so far!</p>

<h2 id="extra-cleanup---group-disabled-rules">Extra cleanup - group disabled rules</h2>

<blockquote>
  <p>üöß To proceed, you will need a good amount of knowledge of ESLint rules, or time set aside to investigate rules one by one.</p>
</blockquote>

<p>Now, if there is time, the ideal next step is to re-enable all of the disabled rules to ensure we make the most of the linting. Proceeding with this is generally very time-consuming, so we‚Äôll go through it gradually ‚Äì the first step is for us to assess how big of an investment is ahead of us, and what the benefits may be. Let‚Äôs assess the rules we‚Äôve just disabled, and group them into meaningful chunks.</p>

<p>Here are starting groups I would recommend:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Rules which should ideally be re-enabled, that are about consistent code style more than anything.</span>
<span class="kd">const</span> <span class="nx">legacyConventions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">class-methods-use-this</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">react/prefer-stateless-function</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">react/sort-comp</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// Rules which are not necessarily issues on their own but can make the code confusing or hard to troubleshoot, leading to bugs.</span>
<span class="kd">const</span> <span class="nx">codeSmells</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">import/no-named-as-default</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">prefer-const</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">prefer-template</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// Rules which point out patterns that are commonly sources of bugs.</span>
<span class="kd">const</span> <span class="nx">sourcesOfBugs</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">eqeqeq</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">react/button-has-type</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="na">radix</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">parser</span><span class="p">:</span> <span class="dl">"</span><span class="s2">babel-eslint</span><span class="dl">"</span><span class="p">,</span>
  <span class="c1">// See https://github.com/torchbox/eslint-config-torchbox for rules.</span>
  <span class="na">extends</span><span class="p">:</span> <span class="dl">"</span><span class="s2">torchbox</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">legacyConventions</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">codeSmells</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">sourcesOfBugs</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>When deciding in what group a given rule belongs, it‚Äôs useful to think of:</p>

<ul>
  <li>The effort it would take to fix all of the violations of the rules,
    <ul>
      <li>Is the code‚Äôs behavior going to be different, or identical? If identical this should be a safe change.</li>
      <li>Can the change be done semi-automatically, e.g. with a search-and-replace?</li>
      <li>How many places in the codebase are there that violate this rule?</li>
      <li>Does the project have tests, types, or another form of static analysis that would make it easy to tell if something broke because of the changes?</li>
    </ul>
  </li>
  <li>The impact of fixing the violations to the rule,
    <ul>
      <li>Does enforcing the rule protect us from a certain type of bugs?</li>
      <li>Would using a more consistent code style make it easier for people to understand the code?</li>
    </ul>
  </li>
</ul>

<p>In terms of impact and effort, the three groups above generally fall into the following areas:</p>

<pre><code class="language-txt">        ‚ñ≤
        ‚îÇ                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                            ‚îÇ       ‚îÇ               ‚îÇ
        ‚îÇ                                    ‚îÇ    Sources    ‚îÇ
        ‚îÇ                            ‚îÇ       ‚îÇ      of       ‚îÇ
 High   ‚îÇ                                    ‚îÇ     bugs      ‚îÇ
 impact ‚îÇ                            ‚îÇ       ‚îÇ               ‚îÇ
        ‚îÇ                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                            ‚îÇ
        ‚îÇ
        ‚îÇ                            ‚îÇ
        ‚îÇ                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                ‚îÇ               ‚îÇ
        ‚îÇ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ‚îÇ               ‚îÇ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ
        ‚îÇ                ‚îÇ  Code smells  ‚îÇ
        ‚îÇ                ‚îÇ               ‚îÇ
        ‚îÇ                ‚îÇ               ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ               ‚îÇ
        ‚îÇ                            ‚îÇ        ‚îÇ    Legacy     ‚îÇ
 Low    ‚îÇ                                     ‚îÇ  conventions  ‚îÇ
 impact ‚îÇ                            ‚îÇ        ‚îÇ               ‚îÇ
        ‚îÇ                                     ‚îÇ               ‚îÇ
        ‚îÇ                            ‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚îÇ                            ‚îÇ
        ‚îÇ
        ‚îÇ                            ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂
                   Low effort                High effort
</code></pre>

<ul>
  <li>Addressing sources of bugs generally has a high impact on the project, but generally involves changes that might alter the behavior of the programme (if there are actual bugs!), so takes a high effort.</li>
  <li>Refactoring project conventions generally takes a high effort compared to the impact on the project (too many conventions / outdated conventions).</li>
  <li>Code smells are a mixed bag, can generally be addressed safely but might take a lot of manual work.</li>
</ul>

<p>The ‚ÄúHigh impact, low effort‚Äù area of our chart feels a bit empty ‚Äì¬†in practice there are a few rules in there, from all three categories, and that‚Äôs the rules we will want to identify next and have a look at fixing.</p>

<hr />

<p>For now ‚Äì <strong>this is a good time to commit</strong>. If you‚Äôre working on the project with other people, now is also a good time to make a pull request, and get it reviewed and merged. Further cleanup requires making changes to the code that go beyond what autofixing does, and will be trickier to review ‚Äì so let‚Äôs get the config to be used first.</p>

<h2 id="going-further">Going further</h2>

<blockquote>
  <p>üöß To proceed, you will need a good amount of knowledge of JavaScript.</p>
</blockquote>

<p>If you have more time than strictly needed for the initial cleanup, let‚Äôs go further. Our goal from now on is to remove all legacy rule overrides we added during the initial setup, while making sure linting still passes. There are a few different ways to approach this depending on the rule:</p>

<ul>
  <li>Refactoring the code in a safe way</li>
  <li>Disabling rules via inline code comments</li>
  <li>Disabling rules with nested ESLint configs</li>
  <li>Changing the code and its behavior</li>
  <li>Doing nothing (üòÑ)</li>
</ul>

<p>Which of these is appropriate is for you to determine case-by-case. The general workflow from now on is:</p>

<ol>
  <li>Run ESLint and get 0 problems reported.</li>
  <li>Comment out one of the rules overrides from our <code class="language-plaintext highlighter-rouge">.eslintrc.js</code>, for example <code class="language-plaintext highlighter-rouge">// "consistent-return": 0,</code>.</li>
  <li>Run ESLint and get problems from the commented-out rules reported.</li>
  <li>Decide which approach to take for what was reported.</li>
  <li>Apply your changes if any.</li>
  <li>Fully remove the commented-out rule override, or add back the line un-commented.</li>
  <li>Run ESLint again and get 0 problems reported.</li>
  <li>Commit your changes if any.</li>
</ol>

<p>We can go through all of the rule overrides like this, or stop when time is up. Here is a one-liner to automatically watch files and re-run ESLint for us that will help speed up the process:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> nodemon@latest
nodemon <span class="nt">-w</span> <span class="s1">'&lt;path to our project‚Äôs JS files&gt;/**/*.js'</span> <span class="nt">-w</span> .eslintrc.js <span class="nt">--exec</span> <span class="s1">'npx eslint .'</span>
</code></pre></div></div>

<h3 id="refactoring-the-code-in-a-safe-way">Refactoring the code in a safe way</h3>

<p>It‚Äôs not always possible to refactor code without altering its behaviour, and realising where this is an option requires a high level of JavaScript (and DOM) expertise. If in doubt, this isn‚Äôt a good option ‚Äì¬†it would be too time-consuming to re-test working software for each and every change.</p>

<p>Here‚Äôs an example of a change that could be considered a safe refactoring:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">getParams</span><span class="p">();</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getCategoryURL</span> <span class="o">=</span> <span class="p">(</span><span class="nx">category</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">getParams</span><span class="p">();</span>
    <span class="nx">params</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">category</span><span class="dl">'</span><span class="p">,</span> <span class="nx">category</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">getURL</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">params</code> variable inside <code class="language-plaintext highlighter-rouge">getCategoryURL</code> raises a problem with <a href="https://eslint.org/docs/rules/no-shadow"><code class="language-plaintext highlighter-rouge">no-shadow</code></a>. We can remove the shadowing by renaming the local variable:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">getParams</span><span class="p">();</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getCategoryURL</span> <span class="o">=</span> <span class="p">(</span><span class="nx">category</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">getParams</span><span class="p">();</span>
    <span class="nx">p</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">category</span><span class="dl">'</span><span class="p">,</span> <span class="nx">category</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">getURL</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="disabling-rules-via-code-comments">Disabling rules via code comments</h3>

<p>This is the next best option ‚Äì if a rule doesn‚Äôt raise too many problems around the codebase, adding <a href="https://eslint.org/docs/user-guide/configuring#disabling-rules-with-inline-comments"><code class="language-plaintext highlighter-rouge">eslint-disable</code></a> comments where relevant makes it possible to only disable the rule for a few lines of legacy code, rather than the whole codebase.</p>

<p>This is always completely safe, and the only drawback is the manual effort involved. Here is an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// eslint-disable-next-line eqeqeq</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">!=</span> <span class="k">this</span><span class="p">.</span><span class="nx">windowWidth</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Update the window width for next time</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">windowWidth</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here, we‚Äôre not really interested in figuring out whether it‚Äôs safe to replace <code class="language-plaintext highlighter-rouge">!=</code> with <code class="language-plaintext highlighter-rouge">!==</code> ‚Äì we just want to move on and be able to benefit from <a href="https://eslint.org/docs/rules/eqeqeq"><code class="language-plaintext highlighter-rouge">eqeqeq</code></a> elsewhere in the code.</p>

<h3 id="disabling-rules-for-a-group-of-files">Disabling rules for a group of files</h3>

<p>ESLint supports overrides for only some of the files in the project: <a href="https://eslint.org/docs/user-guide/configuring#disabling-rules-only-for-a-group-of-files">Disallowing Rules Only for a Group of Files</a>. Generally I would recommend using inline comments instead of config-level overrides. The overrides might seem a bit cleaner (we don‚Äôt have to change the code, and litter it with comments), but they are harder to keep track of since they are decoupled from the code they are for.</p>

<h3 id="changing-the-code-and-its-behavior">Changing the code and its behavior</h3>

<p>If an option, this can be a great way to progress ‚Äì but it requires good knowledge of the project, and time to test. Here is an example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">itemLevel</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">navItem</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">navLevel</span><span class="p">);</span>
</code></pre></div></div>

<p>Here, ESLint expects <code class="language-plaintext highlighter-rouge">parseInt</code> to be provided with a <a href="https://eslint.org/docs/rules/radix"><code class="language-plaintext highlighter-rouge">radix</code></a> parameter instead of relying on the default behavior, which can be confusing or a source of bug. While it might seem harmless enough to add a radix of 10 as a parameter, we can‚Äôt really tell from the code alone whether <code class="language-plaintext highlighter-rouge">navLevel</code> is indeed in base 10 ‚Äì so we would effectively be changing the code in a way that could be very significant.</p>

<h3 id="doing-nothing-">Doing nothing (üòÑ)</h3>

<p>Again, if none of those options seem appropriate ‚Äì it‚Äôs also perfectly fine to leave the newly updated config with its overrides and move on. Updating the config, even if only partially, already goes towards addressing technical debt and raising quality standards.</p>

<h2 id="wrapping-up">Wrapping up</h2>

<p>Beyond updating the config, here are additional steps you should consider to make the most of ESLint on your project:</p>

<ul>
  <li>Use <a href="https://prettier.io/">Prettier</a>, if you aren‚Äôt already. With Prettier‚Äôs great support for many languages, in 2020 formatting code manually is a complete waste of time.</li>
  <li>Make sure you and your team have editor / IDE extensions for ESLint. This will make it much easier for everyone to understand the new config and address problems as they arise.</li>
  <li>Consider using <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">pre-commit hooks</a> on your project. While these might seem annoying at first, they can save you a lot of back-and-forth with CI (and code reviews!).</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Python static type checking: field test]]></title>
    <link href="https://thib.me/python-static-type-checking-field-test"/>
    <updated>2019-12-28T17:10:26+00:00</updated>
    <id>https://thib.me/python-static-type-checking-field-test</id>
    <content type="html"><![CDATA[<p>A few years ago, with the release of <a href="https://pyre-check.org/">Pyre</a> from Facebook, I got really excited about the potential of type annotations and type checkers for Python codebases. Having spent a lot of time with <a href="https://flow.org/">Flow</a>, also from Facebook, I was full of hope. Now, let‚Äôs see how well static type checking actually works in modern Python.</p>

<!-- more -->

<h2 id="tldr">TL;DR;</h2>

<p>After my experiments, I was really hoping I could heartily recommend using type annotations and static type checkers for most projects in most cases. In reality it feels like it‚Äôs too early still, unless:</p>

<ul>
  <li>You‚Äôre already sold on the idea of static typing, and you already know type systems from other languages ‚Äì¬†you‚Äôll be able to navigate the messy Python landscape.</li>
  <li>You only work on projects that are kept up-to-date with Python releases ‚Äì so Python 3.8+ only.</li>
  <li>You maintain large codebases, and have a large enough team to invest into tooling.</li>
</ul>

<p>For the rest of us, who work on teams with varying degrees of knowledge and buy-in about types, in projects that use Python 3.5, with lots of untyped dependencies, and little budget for maintenance ‚Äì¬†it just feels too early.</p>

<h2 id="type-annotations">Type annotations</h2>

<p>The first thing I learned while investigating static typing more thoroughly was that even though PEP-484, which started it all, was implemented in Python 3.5 ‚Äì it really was just the beginning, and much more is needed to fully benefit from typing code. Here are all type-related PEPs I looked into using while typing my <a href="https://github.com/springload/draftjs_exporter/issues/101">¬±4000 SLOC project</a> on which I wanted to try this:</p>

<ul>
  <li><a href="https://www.python.org/dev/peps/pep-3107/">PEP 3107 ‚Äì Function annotations</a> (Python 3.0)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0484/">PEP 484 ‚Äì Type annotations for function parameters and return values</a> (Python 3.5)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0526/">PEP 526 ‚Äì Syntax for Variable Annotations</a> (Python 3.6)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0561/">PEP 561 ‚Äì Distributing and Packaging Type Information</a> (Python 3.7)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0563/">PEP 563 ‚Äì Postponed Evaluation of Annotations</a> (Python 3.7)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0586/">PEP 586 ‚Äì Literal Types</a> (Python 3.8)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0589/">PEP 589 ‚Äì TypedDict: Type Hints for Dictionaries with a Fixed Set of Keys</a> (Python 3.8)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0544/">PEP 544 ‚Äì Protocols: Structural subtyping (static duck typing)</a> (Python 3.8)</li>
  <li><a href="https://www.python.org/dev/peps/pep-0591/">PEP 591 ‚Äì Adding a final qualifier to typing</a> (Python 3.8)</li>
  <li>Not a PEP but also worth mentioning: the <a href="https://pypi.org/classifiers/"><code class="language-plaintext highlighter-rouge">Typing :: Typed</code></a> trove classifier</li>
</ul>

<p>I‚Äôm used to leveraging dictionaries with fixed set of keys in other languages (e.g. JSON with a set structure). Literal types are also very useful. So is structural subtyping, especially in a language like Python. Without these available, it felt really strange to write annotations using very broad categories ‚Äì¬†e.g. <code class="language-plaintext highlighter-rouge">Dict[str, Any]</code> when really the dictionary should only have a few keys for which the types are well-known. Or use <code class="language-plaintext highlighter-rouge">str</code> for a very limited set of literals.</p>

<p>I found the <a href="https://mypy.readthedocs.io/en/latest/index.html">mypy documentation</a> to be the best source of information on what was and wasn‚Äôt available in the type system / type checkers. It‚Äôs important to note that some of the above are available as backports in <a href="https://github.com/python/typing/tree/master/typing_extensions">typing_extensions</a>, but I felt somewhat funny adding a dependency for my project just for the sole purpose of adding type definitions that are only ever used statically. All in all, if it wasn‚Äôt for mypy‚Äôs type reference this would have been really hard to navigate. Hopefully this will get easier once Python 3.8+ is more established, and there are more resources available online dedicated to static typing in Python.</p>

<h2 id="type-checkers">Type checkers</h2>

<p>On the topic of type checkers, here are the ones I tried:</p>

<ul>
  <li><a href="https://github.com/google/pytype">pytype</a> from Google.</li>
  <li><a href="https://github.com/Microsoft/pyright">pyright</a> from Microsoft.</li>
  <li><a href="https://pyre-check.org/">Pyre</a> from Facebook.</li>
  <li><a href="https://github.com/python/mypy">mypy</a> from Dropbox (and more).</li>
</ul>

<p>Out of these four, mypy is by far the most established, having been around the longest, and having the best documentation. Even though I liked Flow from Facebook, Pyre still feels very experimental and poorly documented ‚Äì as far as I could remember the official docs are the exact same as they were when I checked it out a year ago, and I couldn‚Äôt get it to understand type aliases. I also had similar documentation issues with pytype ‚Äì¬†I could get it working, but couldn‚Äôt get it to read my project‚Äôs stubs. Finally, pyright gets an honorable mention. Its README clearly states that it‚Äôs only a side project (and has been created only a few months ago), but it was very straightforward to set up and get meaningful results with.</p>

<p>I would recommend using mypy for people starting with static typing in Python ‚Äì it‚Äôs the easiest to use as of now, has the <a href="https://mypy.readthedocs.io/en/latest/">best documentation</a> by far, and seems like it has a bright future ahead of itself. It even has a <a href="https://mypy.readthedocs.io/en/latest/mypy_daemon.html">daemon/server mode</a> to get better performance for large codebases.</p>

<h2 id="starting-to-use-types-on-a-project">Starting to use types on a project</h2>

<p>Here is the process I would recommend, for small projects where the whole codebase can be typed in one go:</p>

<ol>
  <li>Research whether types are suitable on your project ‚Äì do you have major dependencies that might be untyped and hard to stub? Are there JSON-like data structures that will need special attention to be typed correctly?</li>
  <li>Set up mypy with the most permissive settings possible. We can turn on the strictness later.</li>
  <li>Consider using a tool like <a href="https://github.com/dropbox/pyannotate">pyannotate</a> (also from Dropbox) to automatically add annotations to your code.</li>
  <li>Start manually annotating internal modules that have straightforward signatures (e.g. utility code, or basic data processing, without external dependencies)</li>
  <li>Expand annotations to reach your public API.</li>
  <li>Turn on stricter mypy settings.</li>
</ol>

<h2 id="resources">Resources</h2>

<p>Here are resources I would also recommend checking out:</p>

<ul>
  <li><a href="https://realpython.com/python-type-checking/">https://realpython.com/python-type-checking/</a>, the best all-in-one resource that is not mypy‚Äôs type system reference.</li>
  <li><a href="https://github.com/typeddjango/awesome-python-typing">https://github.com/typeddjango/awesome-python-typing</a>, a list of resources on typing in Python.</li>
  <li><a href="https://github.com/psf/black/blob/master/black.py">https://github.com/psf/black/blob/master/black.py</a>, a real-world codebase that uses type annotations.</li>
  <li><a href="https://github.com/JelleZijlstra/lxml-stubs">https://github.com/JelleZijlstra/lxml-stubs</a>, an example of type stubs outside of typeshed.</li>
  <li><a href="https://www.destroyallsoftware.com/talks/ideology">https://www.destroyallsoftware.com/talks/ideology</a>, an inslightful talk from Gary Bernhardt about types, unit tests, and ideology.</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Testing with multiple versions of npm packages]]></title>
    <link href="https://thib.me/testing-with-multiple-versions-of-npm-packages"/>
    <updated>2019-12-09T20:36:37+00:00</updated>
    <id>https://thib.me/testing-with-multiple-versions-of-npm-packages</id>
    <content type="html"><![CDATA[<p>Have you ever wondered how to test your library against multiple versions of a project like React? Well, there is a way ‚Äì and it‚Äôs not even that complex!</p>

<!-- more -->

<h2 id="installing-multiple-versions">Installing multiple versions</h2>

<p>With Yarn ‚Äì it‚Äôs been around for ages, and is <a href="https://yarnpkg.com/lang/en/docs/cli/add/#toc-yarn-add-alias">very well documented</a>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add &lt;alias-package&gt;@npm:&lt;package&gt;
</code></pre></div></div>

<p>This aliasing feature allows us to add as many packages as we need, all resolving to different versions of the same package.</p>

<p>With npm ‚Äì package aliases have been available since <a href="https://github.com/npm/cli/releases/tag/v6.9.0">v6.9.0</a>. Sadly, the only good resource I could find on this is a StackOverflow answer: <a href="https://stackoverflow.com/a/56495651/1798491">how to install multiple versions of package using npm</a>.</p>

<p>For my need with Draft.js, this is what the result looks like in <code class="language-plaintext highlighter-rouge">package.json</code>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"draft-js"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.10.5"</span><span class="err">,</span><span class="w">
</span><span class="nl">"draft-js-11"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm:draft-js@0.11.3"</span><span class="err">,</span><span class="w">
</span></code></pre></div></div>

<h2 id="configuring-mocks-for-tests">Configuring mocks for tests</h2>

<p>Using <a href="https://jestjs.io/">Jest</a>, this also turns out to be very straightforward. The setup even works with <code class="language-plaintext highlighter-rouge">create-react-app</code>. In <code class="language-plaintext highlighter-rouge">setupTests.js</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="dl">"</span><span class="s2">draft-js</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">packages</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">0.10</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">draft-js</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">0.11</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">draft-js-11</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">};</span>
  <span class="kd">const</span> <span class="nx">version</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DRAFTJS_VERSION</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">0.10</span><span class="dl">"</span><span class="p">;</span>

  <span class="c1">// Require the original module.</span>
  <span class="kd">const</span> <span class="nx">originalModule</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">requireActual</span><span class="p">(</span><span class="nx">packages</span><span class="p">[</span><span class="nx">version</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">__esModule</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">originalModule</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">});</span>
</code></pre></div></div>

<p>We simply have a mock for the dependency, and then require either of the packages depending on an environment variable.</p>

<h2 id="testing-both-versions-in-ci">Testing both versions in CI</h2>

<p>In CI, we can then set up a build (or environment, or job) matrix to run tests with different environment variables. With Travis CI, this looks like:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">node_js</span>
<span class="na">install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">npm ci</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">include</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">env</span><span class="pi">:</span> <span class="s">DRAFTJS_VERSION=0.10</span>
    <span class="pi">-</span> <span class="na">env</span><span class="pi">:</span> <span class="s">DRAFTJS_VERSION=0.11</span>
<span class="na">script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">npm run test</span>
</code></pre></div></div>

<p>And that‚Äôs it!</p>

<p>See the end results over at <a href="https://github.com/thibaudcolas/draftjs-filters">thibaudcolas/draftjs-filters</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Draftail v1.3.0: community improvements, beyond Wagtail]]></title>
    <link href="https://thib.me/draftail-v1-3-0-community-improvements-beyond-wagtail"/>
    <updated>2019-08-14T23:56:37+00:00</updated>
    <id>https://thib.me/draftail-v1-3-0-community-improvements-beyond-wagtail</id>
    <content type="html"><![CDATA[<p>Time for a new release! Draftail <a href="https://github.com/springload/draftail/blob/master/CHANGELOG.md#v130">v1.3.0</a> is out, and this is the first release to solely focus on improvements or fixes requested by users of Draftail outside of Wagtail, its first large-scale implementation.</p>

<!-- more -->

<h2 id="bug-fixes-and-new-features">Bug fixes and new features</h2>

<h3 id="readonly-editor-support">readOnly editor support</h3>

<p>The editor now supports being set to <a href="https://www.draftail.org/docs/api#draftaileditor"><code class="language-plaintext highlighter-rouge">readOnly</code></a> mode, just like vanilla Draft.js. Thanks to <a href="https://github.com/SpearThruster">@SpearThruster</a> for requesting this, <em>and</em> making the pull request to implement this new prop for the editor üéâ.</p>

<h3 id="controlled-editor">Controlled editor</h3>

<p>Another commonly requested feature was for using the editor as a <a href="https://reactjs.org/docs/forms.html#controlled-components">controlled component</a> ‚Äì the recommended mode of operation for form elements in React, and again how vanilla Draft.js works.</p>

<p>This is now implemented with two props: <a href="https://www.draftail.org/docs/api#editorstate-and-onchange"><code class="language-plaintext highlighter-rouge">editorState</code> and <code class="language-plaintext highlighter-rouge">onChange</code></a>. People familiar with vanilla Draft.js will feel right at home. This will also make it much easier to integrate the editor in apps where state is centrally managed, or where forms have specific reset / validation behavior.</p>

<p>To help with Draft.js state initialisation and persistence, Draftail now also exposes APIs to help with <a href="https://www.draftail.org/docs/controlled-component#data-conversion-helpers">data conversion</a>, which are built-in with the uncontrolled editor API.</p>

<h3 id="customisable-undoredo-button-icons">Customisable undo/redo button icons</h3>

<p>Thanks to <a href="https://github.com/rmakovyak">@rmakovyak</a> for fixing this ‚Äì icons should be <a href="https://www.draftail.org/docs/customising-icons">customisable in the toolbar</a> for all buttons, but there was a bug preventing this for undo/redo buttons via the <code class="language-plaintext highlighter-rouge">showUndoControl</code> and <code class="language-plaintext highlighter-rouge">showRedoControl</code> props.</p>

<h2 id="state-of-draftail">State of Draftail</h2>

<p>Put simply, none of the above changes are going to be useful for Draftail‚Äôs first use case: as an editor for <a href="https://wagtail.io">Wagtail</a>. I find this wonderful: this reflects that the editor is beneficial for people outside of the Wagtail bubble, and, with those changes, it will become useful for even more use cases that I didn‚Äôt initially identify.</p>

<p>According to GitHub and npm statistics, the editor is used in <a href="https://github.com/springload/draftail/network/dependents">118 public repositories</a> and gets downloaded <a href="https://www.npmjs.com/package/draftail">1‚Äô772 times per week on npm</a>. There are well known names in there ‚Äì the <a href="https://github.com/fecgov/fec-cms">FEC</a> in the US for their CMS, <a href="https://github.com/NCI-Agency/anet">NATO‚Äôs Communication and Information Agency</a>, <a href="https://medialab.sciencespo.fr">Sciences Po‚Äôs m√©dialab</a>. <a href="https://getsaleor.com/">Saleor</a>, an up-and-coming e-commerce platform built on modern technologies also <a href="https://medium.com/saleor/february-release-of-saleor-three-new-dashboard-2-0-sections-6d775479882e">announced on their blog</a> that the upcoming version of Saleor would be using Draftail for rich text content.</p>

<p><img src="/images/blog/draftail-v1-3-0-community-improvements-beyond-wagtail/draftail-in-saleor.png" alt="Screenshot of Draftail as it is used in Saleor 2.0, for a product description field" /></p>

<blockquote>
  <p>Draftail looking good in Saleor dashboard 2.0!</p>
</blockquote>

<p>I‚Äôm sure there are many more. If you‚Äôre using Draftail, please do <a href="https://github.com/thibaudcolas/draftail.org/issues/13">get in touch</a> so others can see all of the cool things you‚Äôre doing with it!</p>

<h3 id="up-next">Up next</h3>

<p>With those improvements in place to make Draftail usable in more scenarios, I‚Äôd really like to go back to focusing on features again. Here are things that look really cool that I‚Äôd like to look at next:</p>

<ul>
  <li><a href="https://github.com/springload/draftail/issues/198">Table support #198</a>. This is lots of work, but would be really cool to have basic support out of the box or as an ‚Äúofficial‚Äù extension.</li>
  <li><a href="https://github.com/springload/draftail/issues/158">Support image blocks without wrapper text blocks #158</a> ‚Äì and generally better built-in support for images, most likely as an ‚Äúofficial‚Äù extension with good defaults.</li>
  <li><a href="https://github.com/springload/draftail/issues/113">Add character replacements for typing convenience &amp; typographic correctness #113</a>. This is one of those little things that make an editor much more pleasant to use, if done well.</li>
  <li><a href="https://github.com/springload/draftail/issues/118">Add support for emojis #118</a>. I‚Äôd really like to nail this one!</li>
</ul>
]]></content>
  </entry>
  
</feed>
